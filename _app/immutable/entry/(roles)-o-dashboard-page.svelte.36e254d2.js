import{_ as D}from"../chunks/preload-helper.41c905a7.js";import{S as I,i as Q,s as R,k as v,a as O,r as q,l as h,m as k,h as o,c as E,u as B,p as U,b as m,F as T,K as P,n as V,L,J as N,o as W,V as x,x as A}from"../chunks/index.7f1a9c88.js";import{D as M,W as S,Q as F}from"../chunks/y-websocket.00d63cb4.js";import{c as J}from"../chunks/pocketbase.2fde5c2d.js";function K(l){let n,i,a,r,c,u,y,p,b,_,f,t,w,d;return{c(){n=v("div"),i=v("div"),a=O(),r=v("br"),c=O(),u=v("button"),y=q("disconnect"),p=O(),b=v("br"),_=O(),f=v("button"),t=q("connect"),this.h()},l(e){n=h(e,"DIV",{class:!0});var s=k(n);i=h(s,"DIV",{}),k(i).forEach(o),s.forEach(o),a=E(e),r=h(e,"BR",{}),c=E(e),u=h(e,"BUTTON",{});var g=k(u);y=B(g,"disconnect"),g.forEach(o),p=E(e),b=h(e,"BR",{}),_=E(e),f=h(e,"BUTTON",{});var C=k(f);t=B(C,"connect"),C.forEach(o),this.h()},h(){U(n,"class","editor-wrapper")},m(e,s){m(e,n,s),T(n,i),l[3](i),m(e,a,s),m(e,r,s),m(e,c,s),m(e,u,s),T(u,y),m(e,p,s),m(e,b,s),m(e,_,s),m(e,f,s),T(f,t),w||(d=[P(u,"click",function(){x(console.log(l[1].disconnect()))&&console.log(l[1].disconnect()).apply(this,arguments)}),P(f,"click",function(){x(console.log(l[1].connect()))&&console.log(l[1].connect()).apply(this,arguments)})],w=!0)},p(e,[s]){l=e},i:V,o:V,d(e){e&&o(n),l[3](null),e&&o(a),e&&o(r),e&&o(c),e&&o(u),e&&o(p),e&&o(b),e&&o(_),e&&o(f),w=!1,L(d)}}}function j(l,n,i){let a;N(l,J,t=>i(9,a=t));let r,c,u,y,p,b,{toolbarOptions:_=[[{header:1},{header:2},"blockquote","link","image","video"],["bold","italic","underline","strike"],[{list:"ordered"},{list:"ordered"}],[{align:[]}],["clean"]]}=n;W(async()=>{a&&(b=a.username),console.log(b);const{default:t}=await D(()=>import("../chunks/quill.cb7096aa.js").then(d=>d.q),["../chunks/quill.cb7096aa.js","../chunks/_commonjsHelpers.725317a4.js"],import.meta.url),{default:w}=await D(()=>import("../chunks/quill-cursors.5e615971.js").then(d=>d.q),["../chunks/quill-cursors.5e615971.js","../chunks/_commonjsHelpers.725317a4.js"],import.meta.url);t.register("modules/cursors",w),u=new M,i(1,c=new S("ws://gttx-ws.fly.dev","gttx",u)),y=u.getText("quill"),i(0,r=new t(r,{cursors:!0,modules:{toolbar:_,cursors:{transformOnTextChange:!0}},history:{userOnly:!0},theme:"snow",placeholder:"Write your story..."})),new F(y,r,c.awareness),p=r.getModule("cursors"),p.createCursor("cursor",a.username,"red"),c.on("synced",d=>{console.log("synced!",d)})});function f(t){A[t?"unshift":"push"](()=>{r=t,i(0,r)})}return l.$$set=t=>{"toolbarOptions"in t&&i(2,_=t.toolbarOptions)},[r,c,_,f]}class Y extends I{constructor(n){super(),Q(this,n,j,K,R,{toolbarOptions:2})}}export{Y as default};
