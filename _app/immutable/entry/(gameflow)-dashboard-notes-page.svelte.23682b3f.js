import{S as X,i as J,s as H,D as T,a as O,k,r as w,e as I,c as N,l as g,m as E,u as $,h as f,b as h,G as b,H as A,n as s,L as ee,o as te,p as P,V as F,M as G,N as le,v as oe,a1 as ne,g as C,d as D,z as K,A as Y,B as Z,C as x}from"../chunks/index.f25a3516.js";import{c as re,p as L,b as ce}from"../chunks/pocketbase.026f421a.js";import{N as ae}from"../chunks/NotesFac.48b2257f.js";function z(n,t,l){const e=n.slice();return e[1]=t[l],e}function se(n){let t,l,e=n[13].message+"",o;return{c(){t=k("p"),l=w("Error: "),o=w(e)},l(c){t=g(c,"P",{});var r=E(t);l=$(r,"Error: "),o=$(r,e),r.forEach(f)},m(c,r){h(c,t,r),b(t,l),b(t,o)},p:s,d(c){c&&f(t)}}}function ue(n){let t,l,e,o,c,r,m=n[0],i,u,a,_,y,p,R,U,v={ctx:n,current:null,token:null,hasCatch:!1,pending:_e,then:fe,catch:ie,value:14};T(n[3](),v);let S=Q(n);return{c(){t=k("form"),l=k("h2"),e=w("Request for comment"),o=O(),c=k("p"),v.block.c(),r=O(),S.c(),i=O(),u=k("label"),a=k("textarea"),_=O(),y=k("button"),p=w("Submit"),this.h()},l(q){t=g(q,"FORM",{});var d=E(t);l=g(d,"H2",{});var M=E(l);e=$(M,"Request for comment"),M.forEach(f),o=N(d),c=g(d,"P",{id:!0});var V=E(c);v.block.l(V),V.forEach(f),r=N(d),S.l(d),i=N(d),u=g(d,"LABEL",{for:!0});var B=E(u);a=g(B,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0}),E(a).forEach(f),B.forEach(f),_=N(d),y=g(d,"BUTTON",{type:!0,id:!0});var j=E(y);p=$(j,"Submit"),j.forEach(f),d.forEach(f),this.h()},h(){P(c,"id","curr_question"),P(a,"name","notes"),P(a,"id","notes"),P(a,"cols","50"),P(a,"rows","4"),P(u,"for","notes"),P(y,"type","submit"),P(y,"id","submit_answer")},m(q,d){h(q,t,d),b(t,l),b(l,e),b(t,o),b(t,c),v.block.m(c,v.anchor=null),v.mount=()=>c,v.anchor=null,b(t,r),S.m(t,null),b(t,i),b(t,u),b(u,a),F(a,n[1]),b(t,_),b(t,y),b(y,p),R||(U=[G(a,"input",n[7]),G(y,"click",n[4])],R=!0)},p(q,d){n=q,A(v,n,d),d&1&&H(m,m=n[0])?(S.d(1),S=Q(n),S.c(),S.m(t,i)):S.p(n,d),d&2&&F(a,n[1])},d(q){q&&f(t),v.block.d(),v.token=null,v=null,S.d(q),R=!1,le(U)}}}function ie(n){return{c:s,l:s,m:s,p:s,d:s}}function fe(n){let t=n[14]+"",l;return{c(){l=w(t)},l(e){l=$(e,t)},m(e,o){h(e,l,o)},p:s,d(e){e&&f(l)}}}function _e(n){return{c:s,l:s,m:s,p:s,d:s}}function Q(n){let t;return{c(){t=w(n[0])},l(l){t=$(l,n[0])},m(l,e){h(l,t,e)},p(l,e){e&1&&oe(t,l[0])},d(l){l&&f(t)}}}function me(n){let t,l;return{c(){t=k("p"),l=w("Loading...")},l(e){t=g(e,"P",{});var o=E(t);l=$(o,"Loading..."),o.forEach(f)},m(e,o){h(e,t,o),b(t,l)},p:s,d(e){e&&f(t)}}}function pe(n){let t=n[13]+"",l;return{c(){l=w(t)},l(e){l=$(e,t)},m(e,o){h(e,l,o)},p:s,d(e){e&&f(l)}}}function be(n){let t,l=n[10],e=[];for(let o=0;o<l.length;o+=1)e[o]=W(z(n,l,o));return{c(){t=k("li");for(let o=0;o<e.length;o+=1)e[o].c()},l(o){t=g(o,"LI",{});var c=E(t);for(let r=0;r<e.length;r+=1)e[r].l(c);c.forEach(f)},m(o,c){h(o,t,c);for(let r=0;r<e.length;r+=1)e[r].m(t,null)},p(o,c){if(c&32){l=o[10];let r;for(r=0;r<l.length;r+=1){const m=z(o,l,r);e[r]?e[r].p(m,c):(e[r]=W(m),e[r].c(),e[r].m(t,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(o){o&&f(t),ne(e,o)}}}function W(n){let t,l=n[1].question+"",e,o,c,r=n[1].content+"",m,i;return{c(){t=k("h3"),e=w(l),o=O(),c=k("p"),m=w(r),i=O()},l(u){t=g(u,"H3",{});var a=E(t);e=$(a,l),a.forEach(f),o=N(u),c=g(u,"P",{});var _=E(c);m=$(_,r),i=N(_),_.forEach(f)},m(u,a){h(u,t,a),b(t,e),h(u,o,a),h(u,c,a),b(c,m),b(c,i)},p:s,d(u){u&&f(t),u&&f(o),u&&f(c)}}}function he(n){return{c:s,l:s,m:s,p:s,d:s}}function de(n){let t,l,e,o,c,r,m,i={ctx:n,current:null,token:null,hasCatch:!0,pending:me,then:ue,catch:se,error:13};T(n[2](),i);let u={ctx:n,current:null,token:null,hasCatch:!0,pending:he,then:be,catch:pe,value:10,error:13};return T(n[5](),u),{c(){i.block.c(),t=O(),l=k("hr"),e=O(),o=k("h2"),c=w("PREVIOUS NOTES"),r=O(),m=I(),u.block.c()},l(a){i.block.l(a),t=N(a),l=g(a,"HR",{}),e=N(a),o=g(a,"H2",{});var _=E(o);c=$(_,"PREVIOUS NOTES"),_.forEach(f),r=N(a),m=I(),u.block.l(a)},m(a,_){i.block.m(a,i.anchor=_),i.mount=()=>t.parentNode,i.anchor=t,h(a,t,_),h(a,l,_),h(a,e,_),h(a,o,_),b(o,c),h(a,r,_),h(a,m,_),u.block.m(a,u.anchor=_),u.mount=()=>m.parentNode,u.anchor=m},p(a,[_]){n=a,A(i,n,_),A(u,n,_)},i:s,o:s,d(a){i.block.d(a),i.token=null,i=null,a&&f(t),a&&f(l),a&&f(e),a&&f(o),a&&f(r),a&&f(m),u.block.d(a),u.token=null,u=null}}}function ke(n,t,l){let e;ee(n,re,p=>l(9,e=p));let o="",c,{roomID:r="yir2twyh4ws5697"}=t,m="";te(()=>{e||goto("/login"),e.org||goto("/createorg")});async function i(){c=(await L.collection("room").getOne(r,{expand:"scenarios"})).expand.scenarios.contents}async function u(){c==null&&i();const p=await L.collection("room").getOne(r);return c.modules[p.module].questions[p.question]}async function a(){const p=await L.collection("room").getOne(r);console.log(e.id),console.log(e.org);const R={user:e.id,org:e.org,question:c.modules[p.module].questions[p.question],content:o,room:r};await L.collection("notes").create(R)!=Object?l(0,m="PREVIOUS MESSAGE WAS SENT PROPER"):console.log(p)}async function _(){let p=`(org='${e.org}' && user='${e.id}')`;console.log(p);const R=await L.collection("notes").getList(1,50,{filter:p});return console.log(R),R.items}function y(){o=this.value,l(1,o)}return n.$$set=p=>{"roomID"in p&&l(6,r=p.roomID)},[m,o,i,u,a,_,r,y]}class ge extends X{constructor(t){super(),J(this,t,ke,de,H,{roomID:6})}}function Ee(n){return{c:s,l:s,m:s,p:s,i:s,o:s,d:s}}function ve(n){let t,l,e,o;const c=[$e,we],r=[];function m(i,u){return i[0]=="facilitator"?0:1}return t=m(n),l=r[t]=c[t](n),{c(){l.c(),e=I()},l(i){l.l(i),e=I()},m(i,u){r[t].m(i,u),h(i,e,u),o=!0},p:s,i(i){o||(C(l),o=!0)},o(i){D(l),o=!1},d(i){r[t].d(i),i&&f(e)}}}function we(n){let t,l;return t=new ge({}),{c(){K(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,o){Z(t,e,o),l=!0},i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){D(t.$$.fragment,e),l=!1},d(e){x(t,e)}}}function $e(n){let t,l;return t=new ae({}),{c(){K(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,o){Z(t,e,o),l=!0},i(e){l||(C(t.$$.fragment,e),l=!0)},o(e){D(t.$$.fragment,e),l=!1},d(e){x(t,e)}}}function ye(n){return{c:s,l:s,m:s,p:s,i:s,o:s,d:s}}function Se(n){let t,l,e={ctx:n,current:null,token:null,hasCatch:!1,pending:ye,then:ve,catch:Ee,value:0,blocks:[,,,]};return T(ce,e),{c(){t=I(),e.block.c()},l(o){t=I(),e.block.l(o)},m(o,c){h(o,t,c),e.block.m(o,e.anchor=c),e.mount=()=>t.parentNode,e.anchor=t,l=!0},p(o,[c]){n=o,A(e,n,c)},i(o){l||(C(e.block),l=!0)},o(o){for(let c=0;c<3;c+=1){const r=e.blocks[c];D(r)}l=!1},d(o){o&&f(t),e.block.d(o),e.token=null,e=null}}}class qe extends X{constructor(t){super(),J(this,t,null,Se,H,{})}}export{qe as default};
