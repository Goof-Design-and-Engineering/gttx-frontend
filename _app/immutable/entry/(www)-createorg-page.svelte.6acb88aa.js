import{S as ce,i as fe,s as de,a as O,k as p,r as z,z as R,c as T,l as _,m as $,u as C,h as l,A as X,p as v,b as L,F as i,Y as se,B as Z,K as H,Z as ie,_ as pe,g as Q,d as W,C as x,L as _e,J as le,o as ge,v as he,X as $e,n as be}from"../chunks/index.7f1a9c88.js";import{u as me}from"../chunks/useForm.256e94d5.js";import{c as ve,p as A}from"../chunks/pocketbase.2fde5c2d.js";import{H as Ee,a as ye}from"../chunks/HintGroup.0d943f9c.js";import{v as we,r as Ne}from"../chunks/validators.9266e364.js";/* empty css                                */import{g as M}from"../chunks/navigation.e42409cb.js";function ue(o){let e,t;return{c(){e=p("p"),t=z(o[1])},l(a){e=_(a,"P",{});var n=$(e);t=C(n,o[1]),n.forEach(l)},m(a,n){L(a,e,n),i(e,t)},p(a,n){n&2&&he(t,a[1])},d(a){a&&l(e)}}}function Oe(o){let e;return{c(){e=z("This is a mandatory field")},l(t){e=C(t,"This is a mandatory field")},m(t,a){L(t,e,a)},d(t){t&&l(e)}}}function Te(o){let e,t;return e=new ye({props:{on:"required",$$slots:{default:[Oe]},$$scope:{ctx:o}}}),{c(){R(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,n){Z(e,a,n),t=!0},p(a,n){const s={};n&2048&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(Q(e.$$.fragment,a),t=!0)},o(a){W(e.$$.fragment,a),t=!1},d(a){x(e,a)}}}function ze(o){let e,t,a,n,s,g,m,y,k,B,d,I,u,w,h,b,J,P,V,N,j,G,S,Y,D,K,ee,c=o[1]&&ue(o);return u=new Ee({props:{for:"organization",$$slots:{default:[Te]},$$scope:{ctx:o}}}),{c(){c&&c.c(),e=O(),t=p("h1"),a=z("Create an org"),n=O(),s=p("form"),g=p("div"),m=p("div"),y=p("label"),k=z("Organization Name"),B=O(),d=p("input"),I=O(),R(u.$$.fragment),w=O(),h=p("div"),b=p("button"),J=z("Sign up"),V=O(),N=p("button"),j=z("Nevermind, sign out"),G=O(),S=p("button"),Y=z("Join an org instead"),this.h()},l(r){c&&c.l(r),e=T(r),t=_(r,"H1",{class:!0});var f=$(t);a=C(f,"Create an org"),f.forEach(l),n=T(r),s=_(r,"FORM",{method:!0});var E=$(s);g=_(E,"DIV",{class:!0});var te=$(g);m=_(te,"DIV",{});var U=$(m);y=_(U,"LABEL",{for:!0});var ae=$(y);k=C(ae,"Organization Name"),ae.forEach(l),B=T(U),d=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),I=T(U),X(u.$$.fragment,U),U.forEach(l),te.forEach(l),w=T(E),h=_(E,"DIV",{class:!0});var q=$(h);b=_(q,"BUTTON",{});var ne=$(b);J=C(ne,"Sign up"),ne.forEach(l),V=T(q),N=_(q,"BUTTON",{class:!0});var re=$(N);j=C(re,"Nevermind, sign out"),re.forEach(l),q.forEach(l),G=T(E),S=_(E,"BUTTON",{});var oe=$(S);Y=C(oe,"Join an org instead"),oe.forEach(l),E.forEach(l),this.h()},h(){v(t,"class","page-name-header"),v(y,"for","organization"),v(d,"type","username"),v(d,"name","organization"),v(d,"id","username"),v(d,"placeholder","Goof, LLC"),v(g,"class","grid"),b.disabled=P=!o[2].valid,v(N,"class","secondary"),v(h,"class","grid"),v(s,"method","POST")},m(r,f){c&&c.m(r,f),L(r,e,f),L(r,t,f),i(t,a),L(r,n,f),L(r,s,f),i(s,g),i(g,m),i(m,y),i(y,k),i(m,B),i(m,d),se(d,o[0]),i(m,I),Z(u,m,null),i(s,w),i(s,h),i(h,b),i(b,J),i(h,V),i(h,N),i(N,j),i(s,G),i(s,S),i(S,Y),D=!0,K||(ee=[H(d,"input",o[8]),ie(we.call(null,d,[Ne])),H(b,"click",o[4]),H(N,"click",o[6]),H(S,"click",o[5]),ie(o[3].call(null,s)),H(s,"submit",pe(o[7]))],K=!0)},p(r,[f]){r[1]?c?c.p(r,f):(c=ue(r),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),f&1&&se(d,r[0]);const E={};f&2048&&(E.$$scope={dirty:f,ctx:r}),u.$set(E),(!D||f&4&&P!==(P=!r[2].valid))&&(b.disabled=P)},i(r){D||(Q(u.$$.fragment,r),D=!0)},o(r){W(u.$$.fragment,r),D=!1},d(r){c&&c.d(r),r&&l(e),r&&l(t),r&&l(n),r&&l(s),x(u),K=!1,_e(ee)}}}function F(o){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=o.substr(0,3).toUpperCase();let n=a;for(let s=0;s<8-a.length;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function Ce(o,e,t){let a,n;le(o,ve,u=>t(9,a=u));const s=me();le(o,s,u=>t(2,n=u));let g,m;async function y(){var u;try{console.log(F("test"));const w={name:g,members:[a.id],particapant_code:F("participant"),facilitator_code:F("facilitator"),observer_code:F("observer")},h=await A.collection("organization").create(w);if(h!=null){const b={org:h.id};A.collection("users").update((u=A.authStore.model)==null?void 0:u.id,b)}await M("/account")}catch(w){console.log(w),t(1,m=w),await M("/createorg")}}async function k(){M("joinorg")}async function B(){await A.authStore.clear(),M("/")}ge(async()=>{a.org!=""&&M("/account")});function d(u){$e.call(this,o,u)}function I(){g=this.value,t(0,g)}return[g,m,n,s,y,k,B,d,I]}class Le extends ce{constructor(e){super(),fe(this,e,Ce,ze,de,{})}}function Se(o){let e,t,a;return t=new Le({}),{c(){e=p("body"),R(t.$$.fragment)},l(n){e=_(n,"BODY",{});var s=$(e);X(t.$$.fragment,s),s.forEach(l)},m(n,s){L(n,e,s),Z(t,e,null),a=!0},p:be,i(n){a||(Q(t.$$.fragment,n),a=!0)},o(n){W(t.$$.fragment,n),a=!1},d(n){n&&l(e),x(t)}}}function Ue(o){return me(),[]}class qe extends ce{constructor(e){super(),fe(this,e,Ue,Se,de,{})}}export{qe as default};
