import{S as le,i as ne,s as ue,e as se,b as w,n as j,h as o,J as pe,o as de,k as m,r as N,a as $,l as _,m as y,u as T,c as H,q as fe,p as h,F as i,Y as C,K as I,Z as D,_ as ce,v as me,L as _e,X as he,z as we,A as be,B as ve,g as Pe,d as ye,C as Ee}from"../chunks/index.7f1a9c88.js";import{u as ie}from"../chunks/useForm.256e94d5.js";/* empty css                                */import{v as V,r as W}from"../chunks/validators.9266e364.js";import{c as re,p as X}from"../chunks/pocketbase.2fde5c2d.js";import{g as Z}from"../chunks/navigation.e42409cb.js";function oe(l){let s,e,r,n=l[3].username+"",p,d,b,E,g,t,u,k,f,S,v,F,P,L,R,Y,B,O,z,M,A,G,J,Q;return{c(){s=m("hgroup"),e=m("h1"),r=N("Password Change for "),p=N(n),d=$(),b=m("h2"),E=N("Be careful! Password changes are permanent!"),g=$(),t=m("form"),u=m("label"),k=N(`Old Password
			`),f=m("input"),S=N(`

			New Password
			`),v=m("input"),F=N(`

			New Password (...Again)
			`),P=m("input"),L=$(),R=m("br"),Y=$(),B=m("div"),O=m("button"),z=N("Back to Settings"),M=$(),A=m("button"),G=N("Submit"),this.h()},l(a){s=_(a,"HGROUP",{});var c=y(s);e=_(c,"H1",{style:!0});var K=y(e);r=T(K,"Password Change for "),p=T(K,n),K.forEach(o),d=H(c),b=_(c,"H2",{});var x=y(b);E=T(x,"Be careful! Password changes are permanent!"),x.forEach(o),c.forEach(o),g=H(a),t=_(a,"FORM",{method:!0});var ee=y(t);u=_(ee,"LABEL",{});var U=y(u);k=T(U,`Old Password
			`),f=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),S=T(U,`

			New Password
			`),v=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),F=T(U,`

			New Password (...Again)
			`),P=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),U.forEach(o),ee.forEach(o),L=H(a),R=_(a,"BR",{}),Y=H(a),B=_(a,"DIV",{class:!0});var q=y(B);O=_(q,"BUTTON",{class:!0});var te=y(O);z=T(te,"Back to Settings"),te.forEach(o),M=H(q),A=_(q,"BUTTON",{});var ae=y(A);G=T(ae,"Submit"),ae.forEach(o),q.forEach(o),this.h()},h(){fe(e,"font-size","40px"),h(f,"type","password"),h(f,"name","oldpassword"),h(f,"id","password"),h(f,"placeholder","hunter2"),h(v,"type","password"),h(v,"name","oldpassword"),h(v,"id","password"),h(v,"placeholder","SuperSecure69"),h(P,"type","password"),h(P,"name","new_password_again"),h(P,"id","password"),h(P,"placeholder","SuperSecure69"),h(t,"method","POST"),h(O,"class","secondary"),h(B,"class","grid")},m(a,c){w(a,s,c),i(s,e),i(e,r),i(e,p),i(s,d),i(s,b),i(b,E),w(a,g,c),w(a,t,c),i(t,u),i(u,k),i(u,f),C(f,l[0]),i(u,S),i(u,v),C(v,l[1]),i(u,F),i(u,P),C(P,l[2]),w(a,L,c),w(a,R,c),w(a,Y,c),w(a,B,c),i(B,O),i(O,z),i(B,M),i(B,A),i(A,G),J||(Q=[I(f,"input",l[8]),D(V.call(null,f,[W])),I(v,"input",l[9]),D(V.call(null,v,[W])),I(P,"input",l[10]),D(V.call(null,P,[W])),D(l[4].call(null,t)),I(t,"submit",ce(l[7])),I(O,"click",l[6]),I(A,"click",l[5])],J=!0)},p(a,c){c&8&&n!==(n=a[3].username+"")&&me(p,n),c&1&&f.value!==a[0]&&C(f,a[0]),c&2&&v.value!==a[1]&&C(v,a[1]),c&4&&P.value!==a[2]&&C(P,a[2])},d(a){a&&o(s),a&&o(g),a&&o(t),a&&o(L),a&&o(R),a&&o(Y),a&&o(B),J=!1,_e(Q)}}}function ge(l){let s,e=l[3]&&oe(l);return{c(){e&&e.c(),s=se()},l(r){e&&e.l(r),s=se()},m(r,n){e&&e.m(r,n),w(r,s,n)},p(r,[n]){r[3]?e?e.p(r,n):(e=oe(r),e.c(),e.m(s.parentNode,s)):e&&(e.d(1),e=null)},i:j,o:j,d(r){e&&e.d(r),r&&o(s)}}}function Se(l,s,e){let r;pe(l,re,S=>e(3,r=S));var n="",p="",d="";const b=ie();async function E(){console.log(re);try{if(await X.collection("users").authWithPassword(r.username,n),p==d&&p!=""){console.log("Passwords matched, clearing auth and updating password!");try{await X.collection("users").update(r.id,{oldPassword:n,password:p,passwordConfirm:d}),X.authStore.clear(),Z("/login")}catch(S){console.log(S),alert("Something went wrong, please try again.")}}else alert("Your passwords do not match!")}catch(S){console.log(S),alert("Your old password was not correct!")}}async function g(){Z("/account")}de(()=>{r||Z("/login")});function t(S){he.call(this,l,S)}function u(){n=this.value,e(0,n)}function k(){p=this.value,e(1,p)}function f(){d=this.value,e(2,d)}return[n,p,d,r,b,E,g,t,u,k,f]}class Be extends le{constructor(s){super(),ne(this,s,Se,ge,ue,{})}}function Ne(l){let s,e,r,n,p,d,b,E,g;return d=new Be({}),{c(){s=m("head"),e=m("title"),r=N("Hello, world!"),n=$(),p=m("body"),we(d.$$.fragment),b=$(),E=m("pre")},l(t){s=_(t,"HEAD",{});var u=y(s);e=_(u,"TITLE",{});var k=y(e);r=T(k,"Hello, world!"),k.forEach(o),u.forEach(o),n=H(t),p=_(t,"BODY",{});var f=y(p);be(d.$$.fragment,f),f.forEach(o),b=H(t),E=_(t,"PRE",{}),y(E).forEach(o)},m(t,u){w(t,s,u),i(s,e),i(e,r),w(t,n,u),w(t,p,u),ve(d,p,null),w(t,b,u),w(t,E,u),g=!0},p:j,i(t){g||(Pe(d.$$.fragment,t),g=!0)},o(t){ye(d.$$.fragment,t),g=!1},d(t){t&&o(s),t&&o(n),t&&o(p),Ee(d),t&&o(b),t&&o(E)}}}function Te(l){return ie(),[]}class Ce extends le{constructor(s){super(),ne(this,s,Te,Ne,ue,{})}}export{Ce as default};
