import{S as ye,i as ge,s as De,a as A,k as p,r as y,e as me,c as V,l as _,m as h,u as g,h as n,b as I,G as s,v as C,U as Ie,n as he,L as Le,o as we,O as Ae,p as N,M as j,N as Ve,V as ze,Y as F}from"../chunks/index.4fc2f4c3.js";import{c as ve,p as H}from"../chunks/pocketbase.cc5ca80f.js";import{g as Me}from"../chunks/navigation.3dc8513e.js";function be(u,e,t){const a=u.slice();return a[7]=e[t],a[9]=t,a}function Ee(u){let e;return{c(){e=y(u[2])},l(t){e=g(t,u[2])},m(t,a){I(t,e,a)},p(t,a){a&4&&C(e,t[2])},d(t){t&&n(e)}}}function Ne(u){let e=u[7].username+"",t;return{c(){t=y(e)},l(a){t=g(a,e)},m(a,r){I(a,t,r)},p(a,r){r&2&&e!==(e=a[7].username+"")&&C(t,e)},d(a){a&&n(t)}}}function Oe(u){let e=u[7].username+"",t,a;return{c(){t=y(e),a=y(" (self)")},l(r){t=g(r,e),a=g(r," (self)")},m(r,v){I(r,t,v),I(r,a,v)},p(r,v){v&2&&e!==(e=r[7].username+"")&&C(t,e)},d(r){r&&n(t),r&&n(a)}}}function ke(u,e){let t,a,r,v,m,k=e[7].role+"",d,z,f,o,c,L,l,i,b,O,J,K,Y,S,Q,W,q,R,X,Z,B,M,U,$,x,ee;function te(w,E){return w[7].id==w[3].id?Oe:Ne}let G=te(e),D=G(e);return{key:u,first:null,c(){t=p("div"),a=p("div"),r=p("h3"),D.c(),v=A(),m=p("div"),d=y(k),z=A(),f=p("div"),o=p("details"),c=p("summary"),L=y("role"),l=A(),i=p("ul"),b=p("li"),O=p("a"),J=y("facilitator"),K=A(),Y=p("li"),S=p("a"),Q=y("participant"),W=A(),q=p("li"),R=p("a"),X=y("observer"),Z=A(),B=p("div"),M=p("a"),U=y("DELETE"),$=A(),this.h()},l(w){t=_(w,"DIV",{class:!0});var E=h(t);a=_(E,"DIV",{});var le=h(a);r=_(le,"H3",{});var ae=h(r);D.l(ae),ae.forEach(n),le.forEach(n),v=V(E),m=_(E,"DIV",{});var ie=h(m);d=g(ie,k),ie.forEach(n),z=V(E),f=_(E,"DIV",{});var oe=h(f);o=_(oe,"DETAILS",{role:!0});var P=h(o);c=_(P,"SUMMARY",{"aria-haspopup":!0,role:!0,class:!0});var re=h(c);L=g(re,"role"),re.forEach(n),l=V(P),i=_(P,"UL",{role:!0});var T=h(i);b=_(T,"LI",{});var se=h(b);O=_(se,"A",{});var ne=h(O);J=g(ne,"facilitator"),ne.forEach(n),se.forEach(n),K=V(T),Y=_(T,"LI",{});var fe=h(Y);S=_(fe,"A",{});var ce=h(S);Q=g(ce,"participant"),ce.forEach(n),fe.forEach(n),W=V(T),q=_(T,"LI",{});var ue=h(q);R=_(ue,"A",{});var de=h(R);X=g(de,"observer"),de.forEach(n),ue.forEach(n),T.forEach(n),P.forEach(n),oe.forEach(n),Z=V(E),B=_(E,"DIV",{});var pe=h(B);M=_(pe,"A",{href:!0,role:!0});var _e=h(M);U=g(_e,"DELETE"),_e.forEach(n),pe.forEach(n),$=V(E),E.forEach(n),this.h()},h(){N(c,"aria-haspopup","listbox"),N(c,"role","button"),N(c,"class","secondary"),N(i,"role","listbox"),N(o,"role","list"),N(M,"href","#"),N(M,"role","button"),N(t,"class","grid"),this.first=t},m(w,E){I(w,t,E),s(t,a),s(a,r),D.m(r,null),s(t,v),s(t,m),s(m,d),s(t,z),s(t,f),s(f,o),s(o,c),s(c,L),s(o,l),s(o,i),s(i,b),s(b,O),s(O,J),s(i,K),s(i,Y),s(Y,S),s(S,Q),s(i,W),s(i,q),s(q,R),s(R,X),s(t,Z),s(t,B),s(B,M),s(M,U),s(t,$),x||(ee=[j(O,"click",function(){F(e[5](e[7].id,"facilitator"))&&e[5](e[7].id,"facilitator").apply(this,arguments)}),j(S,"click",function(){F(e[5](e[7].id,"participant"))&&e[5](e[7].id,"participant").apply(this,arguments)}),j(R,"click",function(){F(e[5](e[7].id,"observer"))&&e[5](e[7].id,"observer").apply(this,arguments)}),j(M,"click",function(){F(e[4](e[7].id))&&e[4](e[7].id).apply(this,arguments)})],x=!0)},p(w,E){e=w,G===(G=te(e))&&D?D.p(e,E):(D.d(1),D=G(e),D&&(D.c(),D.m(r,null))),E&2&&k!==(k=e[7].role+"")&&C(d,k)},d(w){w&&n(t),D.d(),x=!1,Ve(ee)}}}function Se(u){let e,t,a,r,v,m,k,d=[],z=new Map,f,o=u[2]!=""&&Ee(u),c=u[1];const L=l=>l[7].id;for(let l=0;l<c.length;l+=1){let i=be(u,c,l),b=L(i);z.set(b,d[l]=ke(b,i))}return{c(){o&&o.c(),e=A(),t=p("h1"),a=y("start: "),r=y(u[0]),v=A(),m=p("br"),k=A();for(let l=0;l<d.length;l+=1)d[l].c();f=me()},l(l){o&&o.l(l),e=V(l),t=_(l,"H1",{});var i=h(t);a=g(i,"start: "),r=g(i,u[0]),i.forEach(n),v=V(l),m=_(l,"BR",{}),k=V(l);for(let b=0;b<d.length;b+=1)d[b].l(l);f=me()},m(l,i){o&&o.m(l,i),I(l,e,i),I(l,t,i),s(t,a),s(t,r),I(l,v,i),I(l,m,i),I(l,k,i);for(let b=0;b<d.length;b+=1)d[b].m(l,i);I(l,f,i)},p(l,[i]){l[2]!=""?o?o.p(l,i):(o=Ee(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),i&1&&C(r,l[0]),i&58&&(c=l[1],d=Ie(d,i,L,1,l,c,z,f.parentNode,ze,ke,f,be))},i:he,o:he,d(l){o&&o.d(l),l&&n(e),l&&n(t),l&&n(v),l&&n(m),l&&n(k);for(let i=0;i<d.length;i+=1)d[i].d(l);l&&n(f)}}}function Re(u,e,t){let a;Le(u,ve,f=>t(3,a=f));let r,v,m=[],k="";we(async()=>{var o;if(((o=ve)==null?void 0:o.org)==""){Me("createorg");return}const f=await H.collection("organization").getOne(a==null?void 0:a.org,{expand:"members"});t(1,m=[...m,...f.expand.members]),t(0,v=f.name),r=await H.collection("organization").subscribe(a==null?void 0:a.org,async function(c){const L=await H.collection("organization").getOne(c.record.id,{expand:"members"});t(1,m=L.expand.members)})}),Ae(()=>{r==null||r()});async function d(f){const o=m.filter(c=>c.id!==f);H.collection("organization").update(a==null?void 0:a.org,{members:o.map(c=>c.id)})}async function z(f,o){const c={role:o},L=await H.collection("users").update(f,c);t(2,k=L);const l=await H.collection("organization").getOne(a==null?void 0:a.org,{expand:"members"});t(1,m=l.expand.members)}return[v,m,k,a,d,z]}class qe extends ye{constructor(e){super(),ge(this,e,Re,Se,De,{})}}export{qe as default};
