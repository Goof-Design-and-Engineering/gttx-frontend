import{S as X,i as J,s as H,D as T,a as N,k,r as $,e as I,c as O,l as g,m as E,u as w,h as f,b as h,G as b,H as D,n as i,L as K,o as te,p as P,V as F,M as G,N as le,v as oe,a1 as ne,g as A,d as C,w as re,f as ce,z as Y,A as Z,B as x,C as ee}from"../chunks/index.f25a3516.js";import{c as ae,p as L,b as se}from"../chunks/pocketbase.026f421a.js";import{N as ue}from"../chunks/NotesFac.0cf37986.js";function z(n,e,l){const t=n.slice();return t[1]=e[l],t}function ie(n){let e,l,t=n[13].message+"",o;return{c(){e=k("p"),l=$("Error: "),o=$(t)},l(c){e=g(c,"P",{});var r=E(e);l=w(r,"Error: "),o=w(r,t),r.forEach(f)},m(c,r){h(c,e,r),b(e,l),b(e,o)},p:i,d(c){c&&f(e)}}}function fe(n){let e,l,t,o,c,r,_=n[0],s,u,a,m,y,p,R,U,v={ctx:n,current:null,token:null,hasCatch:!1,pending:pe,then:me,catch:_e,value:14};T(n[3](),v);let S=Q(n);return{c(){e=k("form"),l=k("h2"),t=$("Request for comment"),o=N(),c=k("p"),v.block.c(),r=N(),S.c(),s=N(),u=k("label"),a=k("textarea"),m=N(),y=k("button"),p=$("Submit"),this.h()},l(q){e=g(q,"FORM",{});var d=E(e);l=g(d,"H2",{});var M=E(l);t=w(M,"Request for comment"),M.forEach(f),o=O(d),c=g(d,"P",{id:!0});var V=E(c);v.block.l(V),V.forEach(f),r=O(d),S.l(d),s=O(d),u=g(d,"LABEL",{for:!0});var B=E(u);a=g(B,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0}),E(a).forEach(f),B.forEach(f),m=O(d),y=g(d,"BUTTON",{type:!0,id:!0});var j=E(y);p=w(j,"Submit"),j.forEach(f),d.forEach(f),this.h()},h(){P(c,"id","curr_question"),P(a,"name","notes"),P(a,"id","notes"),P(a,"cols","50"),P(a,"rows","4"),P(u,"for","notes"),P(y,"type","submit"),P(y,"id","submit_answer")},m(q,d){h(q,e,d),b(e,l),b(l,t),b(e,o),b(e,c),v.block.m(c,v.anchor=null),v.mount=()=>c,v.anchor=null,b(e,r),S.m(e,null),b(e,s),b(e,u),b(u,a),F(a,n[1]),b(e,m),b(e,y),b(y,p),R||(U=[G(a,"input",n[7]),G(y,"click",n[4])],R=!0)},p(q,d){n=q,D(v,n,d),d&1&&H(_,_=n[0])?(S.d(1),S=Q(n),S.c(),S.m(e,s)):S.p(n,d),d&2&&F(a,n[1])},d(q){q&&f(e),v.block.d(),v.token=null,v=null,S.d(q),R=!1,le(U)}}}function _e(n){return{c:i,l:i,m:i,p:i,d:i}}function me(n){let e=n[14]+"",l;return{c(){l=$(e)},l(t){l=w(t,e)},m(t,o){h(t,l,o)},p:i,d(t){t&&f(l)}}}function pe(n){return{c:i,l:i,m:i,p:i,d:i}}function Q(n){let e;return{c(){e=$(n[0])},l(l){e=w(l,n[0])},m(l,t){h(l,e,t)},p(l,t){t&1&&oe(e,l[0])},d(l){l&&f(e)}}}function be(n){let e,l;return{c(){e=k("p"),l=$("Loading...")},l(t){e=g(t,"P",{});var o=E(e);l=w(o,"Loading..."),o.forEach(f)},m(t,o){h(t,e,o),b(e,l)},p:i,d(t){t&&f(e)}}}function he(n){let e=n[13]+"",l;return{c(){l=$(e)},l(t){l=w(t,e)},m(t,o){h(t,l,o)},p:i,d(t){t&&f(l)}}}function de(n){let e,l=n[10],t=[];for(let o=0;o<l.length;o+=1)t[o]=W(z(n,l,o));return{c(){e=k("li");for(let o=0;o<t.length;o+=1)t[o].c()},l(o){e=g(o,"LI",{});var c=E(e);for(let r=0;r<t.length;r+=1)t[r].l(c);c.forEach(f)},m(o,c){h(o,e,c);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(o,c){if(c&32){l=o[10];let r;for(r=0;r<l.length;r+=1){const _=z(o,l,r);t[r]?t[r].p(_,c):(t[r]=W(_),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(o){o&&f(e),ne(t,o)}}}function W(n){let e,l=n[1].question+"",t,o,c,r=n[1].content+"",_,s;return{c(){e=k("h3"),t=$(l),o=N(),c=k("p"),_=$(r),s=N()},l(u){e=g(u,"H3",{});var a=E(e);t=w(a,l),a.forEach(f),o=O(u),c=g(u,"P",{});var m=E(c);_=w(m,r),s=O(m),m.forEach(f)},m(u,a){h(u,e,a),b(e,t),h(u,o,a),h(u,c,a),b(c,_),b(c,s)},p:i,d(u){u&&f(e),u&&f(o),u&&f(c)}}}function ke(n){return{c:i,l:i,m:i,p:i,d:i}}function ge(n){let e,l,t,o,c,r,_,s={ctx:n,current:null,token:null,hasCatch:!0,pending:be,then:fe,catch:ie,error:13};T(n[2](),s);let u={ctx:n,current:null,token:null,hasCatch:!0,pending:ke,then:de,catch:he,value:10,error:13};return T(n[5](),u),{c(){s.block.c(),e=N(),l=k("hr"),t=N(),o=k("h2"),c=$("PREVIOUS NOTES"),r=N(),_=I(),u.block.c()},l(a){s.block.l(a),e=O(a),l=g(a,"HR",{}),t=O(a),o=g(a,"H2",{});var m=E(o);c=w(m,"PREVIOUS NOTES"),m.forEach(f),r=O(a),_=I(),u.block.l(a)},m(a,m){s.block.m(a,s.anchor=m),s.mount=()=>e.parentNode,s.anchor=e,h(a,e,m),h(a,l,m),h(a,t,m),h(a,o,m),b(o,c),h(a,r,m),h(a,_,m),u.block.m(a,u.anchor=m),u.mount=()=>_.parentNode,u.anchor=_},p(a,[m]){n=a,D(s,n,m),D(u,n,m)},i,o:i,d(a){s.block.d(a),s.token=null,s=null,a&&f(e),a&&f(l),a&&f(t),a&&f(o),a&&f(r),a&&f(_),u.block.d(a),u.token=null,u=null}}}function Ee(n,e,l){let t;K(n,ae,p=>l(9,t=p));let o="",c,{roomID:r="yir2twyh4ws5697"}=e,_="";te(()=>{t||goto("/login"),t.org||goto("/createorg")});async function s(){c=(await L.collection("room").getOne(r,{expand:"scenarios"})).expand.scenarios.contents}async function u(){c==null&&s();const p=await L.collection("room").getOne(r);return c.modules[p.module].questions[p.question]}async function a(){const p=await L.collection("room").getOne(r);console.log(t.id),console.log(t.org);const R={user:t.id,org:t.org,question:c.modules[p.module].questions[p.question],content:o,room:r};await L.collection("notes").create(R)!=Object?l(0,_="PREVIOUS MESSAGE WAS SENT PROPER"):console.log(p)}async function m(){let p=`(org='${t.org}' && user='${t.id}')`;console.log(p);const R=await L.collection("notes").getList(1,50,{filter:p});return console.log(R),R.items}function y(){o=this.value,l(1,o)}return n.$$set=p=>{"roomID"in p&&l(6,r=p.roomID)},[_,o,s,u,a,m,r,y]}class ve extends X{constructor(e){super(),J(this,e,Ee,ge,H,{roomID:6})}}function $e(n){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function we(n){let e,l,t,o;const c=[Se,ye],r=[];function _(s,u){return s[1]=="facilitator"?0:1}return e=_(n),l=r[e]=c[e](n),{c(){l.c(),t=I()},l(s){l.l(s),t=I()},m(s,u){r[e].m(s,u),h(s,t,u),o=!0},p(s,u){let a=e;e=_(s),e!==a&&(re(),C(r[a],1,1,()=>{r[a]=null}),ce(),l=r[e],l||(l=r[e]=c[e](s),l.c()),A(l,1),l.m(t.parentNode,t))},i(s){o||(A(l),o=!0)},o(s){C(l),o=!1},d(s){r[e].d(s),s&&f(t)}}}function ye(n){let e,l;return e=new ve({}),{c(){Y(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,o){x(e,t,o),l=!0},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function Se(n){let e,l;return e=new ue({}),{c(){Y(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,o){x(e,t,o),l=!0},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){C(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function Ne(n){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function Oe(n){let e,l,t,o={ctx:n,current:null,token:null,hasCatch:!1,pending:Ne,then:we,catch:$e,value:1,blocks:[,,,]};return T(l=n[0],o),{c(){e=I(),o.block.c()},l(c){e=I(),o.block.l(c)},m(c,r){h(c,e,r),o.block.m(c,o.anchor=r),o.mount=()=>e.parentNode,o.anchor=e,t=!0},p(c,[r]){n=c,o.ctx=n,r&1&&l!==(l=n[0])&&T(l,o)||D(o,n,r)},i(c){t||(A(o.block),t=!0)},o(c){for(let r=0;r<3;r+=1){const _=o.blocks[r];C(_)}t=!1},d(c){c&&f(e),o.block.d(c),o.token=null,o=null}}}function Re(n,e,l){let t;return K(n,se,o=>l(0,t=o)),[t]}class Le extends X{constructor(e){super(),J(this,e,Re,Oe,H,{})}}export{Le as default};
