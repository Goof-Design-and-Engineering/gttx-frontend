import{S as me,i as pe,s as _e,a as w,k as f,r as O,z as X,c as C,l as d,m as h,u as B,h as l,A as Z,p as $,b as T,G as i,V as ue,B as x,M as S,W as ce,Y as he,g as ee,d as te,C as re,N as be,L as fe,o as ve,v as $e,R as Ee,n as ge}from"../chunks/index.f25a3516.js";import{c as ye,p as q}from"../chunks/pocketbase.4c010b3b.js";import{H as Ne,a as we}from"../chunks/HintGroup.aa7a84a4.js";import{v as Ce,r as Te,u as ze}from"../chunks/validators.75e44f34.js";import{g as D}from"../chunks/navigation.b6d28c6e.js";function de(s){let e,n;return{c(){e=f("p"),n=O(s[1])},l(r){e=d(r,"P",{});var t=h(e);n=B(t,s[1]),t.forEach(l)},m(r,t){T(r,e,t),i(e,n)},p(r,t){t&2&&$e(n,r[1])},d(r){r&&l(e)}}}function Oe(s){let e,n,r;return{c(){e=f("center"),n=O("This is a mandatory field"),r=f("br")},l(t){e=d(t,"CENTER",{});var a=h(e);n=B(a,"This is a mandatory field"),a.forEach(l),r=d(t,"BR",{})},m(t,a){T(t,e,a),i(e,n),T(t,r,a)},p:ge,d(t){t&&l(e),t&&l(r)}}}function Be(s){let e,n;return e=new we({props:{on:"required",$$slots:{default:[Oe]},$$scope:{ctx:s}}}),{c(){X(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,t){x(e,r,t),n=!0},p(r,t){const a={};t&2048&&(a.$$scope={dirty:t,ctx:r}),e.$set(a)},i(r){n||(ee(e.$$.fragment,r),n=!0)},o(r){te(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function Le(s){let e,n,r,t,a,b,_,E,k,R,p,H,u,y,v,I,P,G,j,F,J,N,L,Y,W,z,K,M,Q,ae,c=s[1]&&de(s);return u=new Ne({props:{for:"organization",$$slots:{default:[Be]},$$scope:{ctx:s}}}),{c(){c&&c.c(),e=w(),n=f("h1"),r=O("Create an org"),t=w(),a=f("form"),b=f("div"),_=f("div"),E=f("label"),k=O("Organization Name"),R=w(),p=f("input"),H=w(),X(u.$$.fragment),y=w(),v=f("button"),I=O("Create your organization!"),G=w(),j=f("hr"),F=f("br"),J=w(),N=f("div"),L=f("button"),Y=O("Join an org instead"),W=w(),z=f("button"),K=O("Nevermind, sign out"),this.h()},l(o){c&&c.l(o),e=C(o),n=d(o,"H1",{class:!0});var m=h(n);r=B(m,"Create an org"),m.forEach(l),t=C(o),a=d(o,"FORM",{method:!0});var g=h(a);b=d(g,"DIV",{class:!0});var ne=h(b);_=d(ne,"DIV",{});var U=h(_);E=d(U,"LABEL",{for:!0});var oe=h(E);k=B(oe,"Organization Name"),oe.forEach(l),R=C(U),p=d(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),H=C(U),Z(u.$$.fragment,U),U.forEach(l),ne.forEach(l),y=C(g),v=d(g,"BUTTON",{});var se=h(v);I=B(se,"Create your organization!"),se.forEach(l),G=C(g),j=d(g,"HR",{}),F=d(g,"BR",{}),J=C(g),N=d(g,"DIV",{class:!0});var V=h(N);L=d(V,"BUTTON",{});var ie=h(L);Y=B(ie,"Join an org instead"),ie.forEach(l),W=C(V),z=d(V,"BUTTON",{class:!0});var le=h(z);K=B(le,"Nevermind, sign out"),le.forEach(l),V.forEach(l),g.forEach(l),this.h()},h(){$(n,"class","page-name-header"),$(E,"for","organization"),$(p,"type","username"),$(p,"name","organization"),$(p,"id","username"),$(p,"placeholder","Goof, LLC"),$(b,"class","grid"),v.disabled=P=!s[2].valid,$(z,"class","contrast"),$(N,"class","grid"),$(a,"method","POST")},m(o,m){c&&c.m(o,m),T(o,e,m),T(o,n,m),i(n,r),T(o,t,m),T(o,a,m),i(a,b),i(b,_),i(_,E),i(E,k),i(_,R),i(_,p),ue(p,s[0]),i(_,H),x(u,_,null),i(a,y),i(a,v),i(v,I),i(a,G),i(a,j),i(a,F),i(a,J),i(a,N),i(N,L),i(L,Y),i(N,W),i(N,z),i(z,K),M=!0,Q||(ae=[S(p,"input",s[8]),ce(Ce.call(null,p,[Te])),S(v,"click",s[4]),S(L,"click",s[5]),S(z,"click",s[6]),ce(s[3].call(null,a)),S(a,"submit",he(s[7]))],Q=!0)},p(o,[m]){o[1]?c?c.p(o,m):(c=de(o),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),m&1&&ue(p,o[0]);const g={};m&2048&&(g.$$scope={dirty:m,ctx:o}),u.$set(g),(!M||m&4&&P!==(P=!o[2].valid))&&(v.disabled=P)},i(o){M||(ee(u.$$.fragment,o),M=!0)},o(o){te(u.$$.fragment,o),M=!1},d(o){c&&c.d(o),o&&l(e),o&&l(n),o&&l(t),o&&l(a),re(u),Q=!1,be(ae)}}}function A(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.substr(0,3).toUpperCase();let t=r;for(let a=0;a<8-r.length;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Ue(s,e,n){let r,t;fe(s,ye,u=>n(9,r=u));const a=ze();fe(s,a,u=>n(2,t=u));let b,_;async function E(){var u;try{console.log(A("test"));const y={name:b,members:[r.id],participant_code:A("participant"),facilitator_code:A("facilitator"),observer_code:A("observer")},v=await q.collection("organization").create(y);if(v!=null){const I={org:v.id};q.collection("users").update((u=q.authStore.model)==null?void 0:u.id,I)}await D("/dashboard")}catch(y){console.log(y),n(1,_=y),await D("/createorg")}}async function k(){D("joinorg")}async function R(){await q.authStore.clear(),D("/")}ve(async()=>{r.org!=""&&D("/dashboard")});function p(u){Ee.call(this,s,u)}function H(){b=this.value,n(0,b)}return[b,_,t,a,E,k,R,p,H]}class ke extends me{constructor(e){super(),pe(this,e,Ue,Le,_e,{})}}function Re(s){let e,n,r;return n=new ke({}),{c(){e=f("body"),X(n.$$.fragment)},l(t){e=d(t,"BODY",{});var a=h(e);Z(n.$$.fragment,a),a.forEach(l)},m(t,a){T(t,e,a),x(n,e,null),r=!0},p:ge,i(t){r||(ee(n.$$.fragment,t),r=!0)},o(t){te(n.$$.fragment,t),r=!1},d(t){t&&l(e),re(n)}}}class Pe extends me{constructor(e){super(),pe(this,e,null,Re,_e,{})}}export{Pe as default};
