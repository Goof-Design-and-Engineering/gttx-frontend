import{S as Qe,i as Ke,s as Ze,k as p,r as I,a as k,l as b,m as v,u as H,h as f,c as E,p as N,b as y,G as c,V as st,M as he,W as at,Y as Dt,n as F,N as yt,L as We,o as rt,R as Pt,q as _e,e as J,a1 as Be,v as x,X as Ut,D as lt,H as It,d as Ee,f as Ht,g as ye,w as Ot,z as $e,A as xe,B as et,C as tt,x as Se,P as Ne,Q as Ae}from"../chunks/index.d8729f0b.js";import{c as ot,p as Je,g as Ct,d as Tt,b as Gt}from"../chunks/pocketbase.f160ef4f.js";import{u as wt}from"../chunks/useForm.f7d2ec9d.js";import{v as Lt,r as St,e as Nt}from"../chunks/validators.6e79bf68.js";import{g as Xe}from"../chunks/navigation.40f10652.js";function ct(i,e,t){const l=i.slice();return l[15]=e[t],l}function ut(i,e,t){const l=i.slice();return l[18]=e[t],l}function At(i){let e,t;return{c(){e=p("center"),t=p("input"),this.h()},l(l){e=b(l,"CENTER",{});var o=v(e);t=b(o,"INPUT",{style:!0,type:!0}),o.forEach(f),this.h()},h(){_e(t,"border","2px solid var(--primary-contrast)"),_e(t,"border-radius","5px"),_e(t,"text-align","center"),N(t,"type","text"),t.value="You have no emails selected right now!",t.readOnly=!0},m(l,o){y(l,e,o),c(e,t)},p:F,d(l){l&&f(e)}}}function Bt(i){let e,t=i[0],l=[];for(let o=0;o<t.length;o+=1)l[o]=ft(ut(i,t,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=J()},l(o){for(let n=0;n<l.length;n+=1)l[n].l(o);e=J()},m(o,n){for(let r=0;r<l.length;r+=1)l[r].m(o,n);y(o,e,n)},p(o,n){if(n&1){t=o[0];let r;for(r=0;r<t.length;r+=1){const u=ut(o,t,r);l[r]?l[r].p(u,n):(l[r]=ft(u),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){Be(l,o),o&&f(e)}}}function ft(i){let e,t,l=i[18]+"",o,n;return{c(){e=p("li"),t=p("ul"),o=I(l),n=k()},l(r){e=b(r,"LI",{});var u=v(e);t=b(u,"UL",{});var a=v(t);o=H(a,l),a.forEach(f),n=E(u),u.forEach(f)},m(r,u){y(r,e,u),c(e,t),c(t,o),c(e,n)},p(r,u){u&1&&l!==(l=r[18]+"")&&x(o,l)},d(r){r&&f(e)}}}function Mt(i){let e;return{c(){e=p("progressbar")},l(t){e=b(t,"PROGRESSBAR",{}),v(e).forEach(f)},m(t,l){y(t,e,l)},p:F,d(t){t&&f(e)}}}function zt(i){let e,t,l,o,n,r=i[3].expand.members,u=[];for(let a=0;a<r.length;a+=1)u[a]=ht(ct(i,r,a));return{c(){e=p("details"),t=p("summary"),l=I("Select Members from Organization"),o=k(),n=p("ul");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=b(a,"DETAILS",{role:!0});var h=v(e);t=b(h,"SUMMARY",{"aria-haspopup":!0});var s=v(t);l=H(s,"Select Members from Organization"),s.forEach(f),o=E(h),n=b(h,"UL",{role:!0});var _=v(n);for(let d=0;d<u.length;d+=1)u[d].l(_);_.forEach(f),h.forEach(f),this.h()},h(){N(t,"aria-haspopup","listbox"),N(n,"role","listbox"),N(e,"role","list")},m(a,h){y(a,e,h),c(e,t),c(t,l),c(e,o),c(e,n);for(let s=0;s<u.length;s+=1)u[s].m(n,null)},p(a,h){if(h&136){r=a[3].expand.members;let s;for(s=0;s<r.length;s+=1){const _=ct(a,r,s);u[s]?u[s].p(_,h):(u[s]=ht(_),u[s].c(),u[s].m(n,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=r.length}},d(a){a&&f(e),Be(u,a)}}}function ht(i){let e,t,l,o,n,r=i[15].username+"",u,a,h=i[15].email+"",s,_,d,m,O;return{c(){e=p("li"),t=p("label"),l=p("input"),n=k(),u=I(r),a=I(" ("),s=I(h),_=I(")"),d=k(),this.h()},l(D){e=b(D,"LI",{});var w=v(e);t=b(w,"LABEL",{});var g=v(t);l=b(g,"INPUT",{type:!0}),n=E(g),u=H(g,r),a=H(g," ("),s=H(g,h),_=H(g,")"),g.forEach(f),w.forEach(f),d=E(D),this.h()},h(){N(l,"type","checkbox"),l.value=o=i[15].email},m(D,w){y(D,e,w),c(e,t),c(t,l),c(t,n),c(t,u),c(t,a),c(t,s),c(t,_),y(D,d,w),m||(O=he(l,"change",function(){Ut(i[7](i[15]))&&i[7](i[15]).apply(this,arguments)}),m=!0)},p(D,w){i=D,w&8&&o!==(o=i[15].email)&&(l.value=o),w&8&&r!==(r=i[15].username+"")&&x(u,r),w&8&&h!==(h=i[15].email+"")&&x(s,h)},d(D){D&&f(e),D&&f(d),m=!1,O()}}}function jt(i){let e,t,l,o,n,r,u,a,h,s,_,d,m,O,D,w,g,U,G,A,te,K,P,V,Z,$,ae,Ie,re,oe,ce,de,ue,He,Oe,X,W,Re,Q,De,me,pe,ee,Pe,Ue,fe;function Le(C,z){return C[0][0]?Bt:At}let B=Le(i),q=B(i);function Y(C,z){return C[4]&&C[3]!={}?zt:Mt}let ne=Y(i),L=ne(i);return{c(){e=p("hgroup"),t=p("h1"),l=I("Email Picker"),o=k(),n=p("h2"),r=I("Let's get this party started."),u=k(),a=p("article"),h=p("header"),s=p("hgroup"),_=p("h2"),d=I("Emails In"),m=k(),O=p("h3"),D=I("These are the emails you'll be inviting to the game."),w=k(),q.c(),g=k(),U=p("hgroup"),G=p("h2"),A=I("Add from organization"),te=k(),K=p("h3"),P=I("Get your colleagues in on the action."),V=k(),L.c(),Z=k(),$=p("footer"),ae=p("br"),Ie=k(),re=p("hgroup"),oe=p("h2"),ce=I("Invite new people via email"),de=k(),ue=p("h3"),He=I("Let others join in on the exercise."),Oe=k(),X=p("form"),W=p("input"),Re=k(),Q=p("button"),De=I("Add this email"),pe=k(),ee=p("button"),Pe=I("Invite people"),this.h()},l(C){e=b(C,"HGROUP",{});var z=v(e);t=b(z,"H1",{});var Me=v(t);l=H(Me,"Email Picker"),Me.forEach(f),o=E(z),n=b(z,"H2",{});var ze=v(n);r=H(ze,"Let's get this party started."),ze.forEach(f),z.forEach(f),u=E(C),a=b(C,"ARTICLE",{});var ie=v(a);h=b(ie,"HEADER",{});var Ce=v(h);s=b(Ce,"HGROUP",{});var Te=v(s);_=b(Te,"H2",{});var je=v(_);d=H(je,"Emails In"),je.forEach(f),m=E(Te),O=b(Te,"H3",{});var Fe=v(O);D=H(Fe,"These are the emails you'll be inviting to the game."),Fe.forEach(f),Te.forEach(f),w=E(Ce),q.l(Ce),Ce.forEach(f),g=E(ie),U=b(ie,"HGROUP",{});var Ge=v(U);G=b(Ge,"H2",{});var R=v(G);A=H(R,"Add from organization"),R.forEach(f),te=E(Ge),K=b(Ge,"H3",{});var M=v(K);P=H(M,"Get your colleagues in on the action."),M.forEach(f),Ge.forEach(f),V=E(ie),L.l(ie),Z=E(ie),$=b(ie,"FOOTER",{});var j=v($);ae=b(j,"BR",{}),Ie=E(j),re=b(j,"HGROUP",{});var T=v(re);oe=b(T,"H2",{});var se=v(oe);ce=H(se,"Invite new people via email"),se.forEach(f),de=E(T),ue=b(T,"H3",{});var be=v(ue);He=H(be,"Let others join in on the exercise."),be.forEach(f),T.forEach(f),Oe=E(j),X=b(j,"FORM",{});var le=v(X);W=b(le,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),Re=E(le),Q=b(le,"BUTTON",{});var ve=v(Q);De=H(ve,"Add this email"),ve.forEach(f),le.forEach(f),j.forEach(f),ie.forEach(f),pe=E(C),ee=b(C,"BUTTON",{});var ge=v(ee);Pe=H(ge,"Invite people"),ge.forEach(f),this.h()},h(){N(W,"type","email"),N(W,"name","email"),N(W,"id","email"),N(W,"placeholder","kevin@example.edu"),Q.disabled=me=!i[5].valid},m(C,z){y(C,e,z),c(e,t),c(t,l),c(e,o),c(e,n),c(n,r),y(C,u,z),y(C,a,z),c(a,h),c(h,s),c(s,_),c(_,d),c(s,m),c(s,O),c(O,D),c(h,w),q.m(h,null),c(a,g),c(a,U),c(U,G),c(G,A),c(U,te),c(U,K),c(K,P),c(a,V),L.m(a,null),c(a,Z),c(a,$),c($,ae),c($,Ie),c($,re),c(re,oe),c(oe,ce),c(re,de),c(re,ue),c(ue,He),c($,Oe),c($,X),c(X,W),st(W,i[2]),c(X,Re),c(X,Q),c(Q,De),y(C,pe,z),y(C,ee,z),c(ee,Pe),Ue||(fe=[he(W,"input",i[10]),at(Lt.call(null,W,[St,Nt])),he(Q,"click",i[11]),at(i[6].call(null,X)),he(X,"submit",Dt(i[9])),he(ee,"click",i[12])],Ue=!0)},p(C,[z]){B===(B=Le(C))&&q?q.p(C,z):(q.d(1),q=B(C),q&&(q.c(),q.m(h,null))),ne===(ne=Y(C))&&L?L.p(C,z):(L.d(1),L=ne(C),L&&(L.c(),L.m(a,Z))),z&4&&W.value!==C[2]&&st(W,C[2]),z&32&&me!==(me=!C[5].valid)&&(Q.disabled=me)},i:F,o:F,d(C){C&&f(e),C&&f(u),C&&f(a),q.d(),L.d(),C&&f(pe),C&&f(ee),Ue=!1,yt(fe)}}}function Ft(i,e,t){let l,o;We(i,ot,g=>t(13,l=g));let{emails:n=[]}=e,{usersIDs:r=[]}=e,{emailsPicked:u=!1}=e;const a=wt();We(i,a,g=>t(5,o=g));let h="",s,_=!1;async function d(g){r.includes(g.id)?(t(8,r=r.filter(U=>U!==g.id)),t(0,n=n.filter(U=>U!==g.email))):(t(8,r=[...r,g.id]),t(0,n=[...n,g.email]),t(0,n=n.filter((U,G)=>n.indexOf(U)===G)))}rt(async()=>{t(3,s=await Je.collection("organization").getOne(l.org,{expand:"members"})),t(4,_=!0)});function m(g){Pt.call(this,i,g)}function O(){h=this.value,t(2,h)}const D=()=>{t(0,n=[...n,h]),t(0,n=n.filter((g,U)=>n.indexOf(g)===U)),t(2,h="")},w=()=>{t(1,u=!0)};return i.$$set=g=>{"emails"in g&&t(0,n=g.emails),"usersIDs"in g&&t(8,r=g.usersIDs),"emailsPicked"in g&&t(1,u=g.emailsPicked)},[n,u,h,s,_,o,a,d,r,m,O,D,w]}class Vt extends Qe{constructor(e){super(),Ke(this,e,Ft,jt,Ze,{emails:0,usersIDs:8,emailsPicked:1})}}function _t(i,e,t){const l=i.slice();return l[5]=e[t],l}function Yt(i){let e=i[8]+"",t;return{c(){t=I(e)},l(l){t=H(l,e)},m(l,o){y(l,t,o)},p:F,d(l){l&&f(t)}}}function qt(i){let e;function t(n,r){var u;return n[4][0]?Xt:((u=n[0])==null?void 0:u.role)=="facilitator"?Jt:Wt}let l=t(i),o=l(i);return{c(){o.c(),e=J()},l(n){o.l(n),e=J()},m(n,r){o.m(n,r),y(n,e,r)},p(n,r){l===(l=t(n))&&o?o.p(n,r):(o.d(1),o=l(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){o.d(n),n&&f(e)}}}function Wt(i){let e;return{c(){e=p("input"),this.h()},l(t){e=b(t,"INPUT",{style:!0,type:!0}),this.h()},h(){_e(e,"border","2px solid var(--primary)"),_e(e,"border-radius","5px"),_e(e,"text-align","center"),N(e,"type","text"),e.value="Looks like you don't have any recent games. Ask your facilitator for more information.",e.readOnly=!0},m(t,l){y(t,e,l)},p:F,d(t){t&&f(e)}}}function Jt(i){let e;return{c(){e=p("input"),this.h()},l(t){e=b(t,"INPUT",{style:!0,type:!0}),this.h()},h(){_e(e,"border","2px solid var(--primary)"),_e(e,"border-radius","5px"),_e(e,"text-align","center"),N(e,"type","text"),e.value="Looks like you don't have any recent games. Choose a scenario above to start one!",e.readOnly=!0},m(t,l){y(t,e,l)},p:F,d(t){t&&f(e)}}}function Xt(i){let e,t=i[4],l=[];for(let o=0;o<t.length;o+=1)l[o]=dt(_t(i,t,o));return{c(){e=p("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var n=v(e);for(let r=0;r<l.length;r+=1)l[r].l(n);n.forEach(f),this.h()},h(){N(e,"class","grid scrollable-grid")},m(o,n){y(o,e,n);for(let r=0;r<l.length;r+=1)l[r].m(e,null)},p(o,n){if(n&6){t=o[4];let r;for(r=0;r<t.length;r+=1){const u=_t(o,t,r);l[r]?l[r].p(u,n):(l[r]=dt(u),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){o&&f(e),Be(l,o)}}}function dt(i){let e,t=i[5].id+"",l,o,n=i[5].created.split(" ")[0]+"",r,u,a,h;function s(){return i[3](i[5])}return{c(){e=p("button"),l=I(t),o=I(", "),r=I(n),u=k(),this.h()},l(_){e=b(_,"BUTTON",{id:!0});var d=v(e);l=H(d,t),o=H(d,", "),r=H(d,n),d.forEach(f),u=E(_),this.h()},h(){N(e,"id",i[5].id)},m(_,d){y(_,e,d),c(e,l),c(e,o),c(e,r),y(_,u,d),a||(h=he(e,"click",s),a=!0)},p(_,d){i=_},d(_){_&&f(e),_&&f(u),a=!1,h()}}}function Qt(i){let e,t,l,o,n,r,u,a,h;return{c(){e=p("center"),t=p("br"),l=k(),o=p("hgroup"),n=p("h1"),r=I("Loading your recent games..."),u=k(),a=p("h2"),h=I("Give it a second..."),this.h()},l(s){e=b(s,"CENTER",{});var _=v(e);t=b(_,"BR",{}),l=E(_),o=b(_,"HGROUP",{});var d=v(o);n=b(d,"H1",{"aria-busy":!0});var m=v(n);r=H(m,"Loading your recent games..."),m.forEach(f),u=E(d),a=b(d,"H2",{});var O=v(a);h=H(O,"Give it a second..."),O.forEach(f),d.forEach(f),_.forEach(f),this.h()},h(){N(n,"aria-busy","true")},m(s,_){y(s,e,_),c(e,t),c(e,l),c(e,o),c(o,n),c(n,r),c(o,u),c(o,a),c(a,h)},p:F,d(s){s&&f(e)}}}function Kt(i){let e,t,l,o,n,r,u,a,h={ctx:i,current:null,token:null,hasCatch:!0,pending:Qt,then:qt,catch:Yt,value:4,error:8};return lt(i[1](),h),{c(){e=p("hgroup"),t=p("h1"),l=I("Recent Games"),o=k(),n=p("h2"),r=I("Check out your previous exercises!"),u=k(),a=J(),h.block.c()},l(s){e=b(s,"HGROUP",{});var _=v(e);t=b(_,"H1",{});var d=v(t);l=H(d,"Recent Games"),d.forEach(f),o=E(_),n=b(_,"H2",{});var m=v(n);r=H(m,"Check out your previous exercises!"),m.forEach(f),_.forEach(f),u=E(s),a=J(),h.block.l(s)},m(s,_){y(s,e,_),c(e,t),c(t,l),c(e,o),c(e,n),c(n,r),y(s,u,_),y(s,a,_),h.block.m(s,h.anchor=_),h.mount=()=>a.parentNode,h.anchor=a},p(s,[_]){i=s,It(h,i,_)},i:F,o:F,d(s){s&&f(e),s&&f(u),s&&f(a),h.block.d(s),h.token=null,h=null}}}function Zt(i,e,t){let l;We(i,ot,u=>t(0,l=u));async function o(){return await Je.collection("room").getFullList(200,{sort:"-created",filter:`org='${l.org}' && users~'${l.id}'`})}async function n(u){try{const a=await Je.collection("users").update(l.id,{roomid:u})}catch(a){console.log(a)}finally{Xe("/dashboard/notes")}return record}return[l,o,n,u=>n(u.id)]}class Rt extends Qe{constructor(e){super(),Ke(this,e,Zt,Kt,Ze,{})}}function mt(i,e,t){const l=i.slice();return l[8]=e[t],l}function pt(i,e,t){const l=i.slice();return l[11]=e[t][0],l[12]=e[t][1],l}function bt(i,e,t){const l=i.slice();return l[15]=e[t],l}function $t(i){let e,t,l,o,n,r,u,a,h;return{c(){e=p("center"),t=p("br"),l=k(),o=p("hgroup"),n=p("h1"),r=I("Loading the scenarios..."),u=k(),a=p("h2"),h=I("Give it a second..."),this.h()},l(s){e=b(s,"CENTER",{});var _=v(e);t=b(_,"BR",{}),l=E(_),o=b(_,"HGROUP",{});var d=v(o);n=b(d,"H1",{"aria-busy":!0});var m=v(n);r=H(m,"Loading the scenarios..."),m.forEach(f),u=E(d),a=b(d,"H2",{});var O=v(a);h=H(O,"Give it a second..."),O.forEach(f),d.forEach(f),_.forEach(f),this.h()},h(){N(n,"aria-busy","true")},m(s,_){y(s,e,_),c(e,t),c(e,l),c(e,o),c(o,n),c(n,r),c(o,u),c(o,a),c(a,h)},p:F,d(s){s&&f(e)}}}function xt(i){let e,t;function l(r,u){return u&1&&(e=null),e==null&&(e=!!Array.isArray(r[0])),e?tl:el}let o=l(i,-1),n=o(i);return{c(){n.c(),t=J()},l(r){n.l(r),t=J()},m(r,u){n.m(r,u),y(r,t,u)},p(r,u){o===(o=l(r,u))&&n?n.p(r,u):(n.d(1),n=o(r),n&&(n.c(),n.m(t.parentNode,t)))},d(r){n.d(r),r&&f(t)}}}function el(i){let e,t,l,o;return{c(){e=p("h3"),t=I("FAILURE"),l=k(),o=I(i[0])},l(n){e=b(n,"H3",{});var r=v(e);t=H(r,"FAILURE"),r.forEach(f),l=E(n),o=H(n,i[0])},m(n,r){y(n,e,r),c(e,t),y(n,l,r),y(n,o,r)},p(n,r){r&1&&x(o,n[0])},d(n){n&&f(e),n&&f(l),n&&f(o)}}}function tl(i){let e,t=i[0],l=[];for(let o=0;o<t.length;o+=1)l[o]=Et(mt(i,t,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=J()},l(o){for(let n=0;n<l.length;n+=1)l[n].l(o);e=J()},m(o,n){for(let r=0;r<l.length;r+=1)l[r].m(o,n);y(o,e,n)},p(o,n){if(n&5){t=o[0];let r;for(r=0;r<t.length;r+=1){const u=mt(o,t,r);l[r]?l[r].p(u,n):(l[r]=Et(u),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){Be(l,o),o&&f(e)}}}function vt(i){var u;let e,t,l=(((u=i[8].contents)==null?void 0:u.source)||"")+"",o,n,r;return{c(){e=I("("),t=p("a"),o=I(l),r=I(")"),this.h()},l(a){e=H(a,"("),t=b(a,"A",{href:!0,target:!0,rel:!0});var h=v(t);o=H(h,l),h.forEach(f),r=H(a,")"),this.h()},h(){var a;N(t,"href",n=((a=i[8].contents)==null?void 0:a.source)||""),N(t,"target","_blank"),N(t,"rel","noreferrer")},m(a,h){y(a,e,h),y(a,t,h),c(t,o),y(a,r,h)},p(a,h){var s,_;h&1&&l!==(l=(((s=a[8].contents)==null?void 0:s.source)||"")+"")&&x(o,l),h&1&&n!==(n=((_=a[8].contents)==null?void 0:_.source)||"")&&N(t,"href",n)},d(a){a&&f(e),a&&f(t),a&&f(r)}}}function gt(i){let e,t=i[15]+"",l,o;return{c(){e=p("li"),l=I(t),o=k()},l(n){e=b(n,"LI",{});var r=v(e);l=H(r,t),o=E(r),r.forEach(f)},m(n,r){y(n,e,r),c(e,l),c(e,o)},p(n,r){r&1&&t!==(t=n[15]+"")&&x(l,t)},d(n){n&&f(e)}}}function kt(i){let e,t,l=i[11]+"",o,n,r,u=i[12].description+"",a,h,s,_,d,m,O,D;function w(){return i[6](i[8],i[11])}return{c(){e=p("p"),t=p("b"),o=I(l),n=I("."),r=k(),a=I(u),h=k(),s=p("button"),_=I("Choose this scenario and module"),d=k(),m=p("hr")},l(g){e=b(g,"P",{});var U=v(e);t=b(U,"B",{});var G=v(t);o=H(G,l),n=H(G,"."),G.forEach(f),r=E(U),a=H(U,u),U.forEach(f),h=E(g),s=b(g,"BUTTON",{});var A=v(s);_=H(A,"Choose this scenario and module"),A.forEach(f),d=E(g),m=b(g,"HR",{})},m(g,U){y(g,e,U),c(e,t),c(t,o),c(t,n),c(e,r),c(e,a),y(g,h,U),y(g,s,U),c(s,_),y(g,d,U),y(g,m,U),O||(D=he(s,"click",w),O=!0)},p(g,U){i=g,U&1&&l!==(l=i[11]+"")&&x(o,l),U&1&&u!==(u=i[12].description+"")&&x(a,u)},d(g){g&&f(e),g&&f(h),g&&f(s),g&&f(d),g&&f(m),O=!1,D()}}}function Et(i){var C,z,Me,ze,ie,Ce,Te,je,Fe,Ge;let e,t,l=i[8].name+"",o,n,r,u,a,h=(((z=(C=i[8].contents)==null?void 0:C.overview)==null?void 0:z.name)||"")+"",s,_,d,m,O=(((Me=i[8].contents)==null?void 0:Me.name)||"")+"",D,w,g,U,G,A,te,K,P,V=(((ie=(ze=i[8].contents)==null?void 0:ze.overview)==null?void 0:ie.purpose)||"")+"",Z,$,ae,Ie,re,oe,ce=(((Te=(Ce=i[8].contents)==null?void 0:Ce.overview)==null?void 0:Te.scope)||"")+"",de,ue,He,Oe,X,W,Re,Q,De,me,pe,ee,Pe,Ue,fe,Le,B=((je=i[8].contents)==null?void 0:je.source)!="N/A"&&vt(i),q=((Fe=i[8].contents)==null?void 0:Fe.overview.objectives)||[],Y=[];for(let R=0;R<q.length;R+=1)Y[R]=gt(bt(i,q,R));let ne=Object.entries(((Ge=i[8].contents)==null?void 0:Ge.modules)||[]),L=[];for(let R=0;R<ne.length;R+=1)L[R]=kt(pt(i,ne,R));return{c(){e=p("details"),t=p("summary"),o=I(l),n=k(),r=p("div"),u=p("hgroup"),a=p("h2"),s=I(h),_=k(),d=p("h3"),m=p("b"),D=I(O),w=k(),B&&B.c(),g=k(),U=p("hr"),G=k(),A=p("h4"),te=I("PURPOSE"),K=k(),P=p("p"),Z=I(V),$=k(),ae=p("h4"),Ie=I("SCOPE"),re=k(),oe=p("p"),de=I(ce),ue=k(),He=p("hr"),Oe=k(),X=p("h4"),W=I("OBJECTIVES"),Re=k(),Q=p("ul");for(let R=0;R<Y.length;R+=1)Y[R].c();De=k(),me=p("hr"),pe=k(),ee=p("h4"),Pe=I("MODULES"),Ue=k(),fe=p("ul");for(let R=0;R<L.length;R+=1)L[R].c();Le=k(),this.h()},l(R){e=b(R,"DETAILS",{});var M=v(e);t=b(M,"SUMMARY",{class:!0});var j=v(t);o=H(j,l),j.forEach(f),n=E(M),r=b(M,"DIV",{class:!0});var T=v(r);u=b(T,"HGROUP",{});var se=v(u);a=b(se,"H2",{});var be=v(a);s=H(be,h),be.forEach(f),_=E(se),d=b(se,"H3",{});var le=v(d);m=b(le,"B",{});var ve=v(m);D=H(ve,O),ve.forEach(f),w=E(le),B&&B.l(le),le.forEach(f),se.forEach(f),g=E(T),U=b(T,"HR",{}),G=E(T),A=b(T,"H4",{});var ge=v(A);te=H(ge,"PURPOSE"),ge.forEach(f),K=E(T),P=b(T,"P",{});var Ve=v(P);Z=H(Ve,V),Ve.forEach(f),$=E(T),ae=b(T,"H4",{});var Ye=v(ae);Ie=H(Ye,"SCOPE"),Ye.forEach(f),re=E(T),oe=b(T,"P",{});var qe=v(oe);de=H(qe,ce),qe.forEach(f),ue=E(T),He=b(T,"HR",{}),Oe=E(T),X=b(T,"H4",{});var S=v(X);W=H(S,"OBJECTIVES"),S.forEach(f),Re=E(T),Q=b(T,"UL",{});var ke=v(Q);for(let we=0;we<Y.length;we+=1)Y[we].l(ke);ke.forEach(f),De=E(T),me=b(T,"HR",{}),pe=E(T),ee=b(T,"H4",{});var nt=v(ee);Pe=H(nt,"MODULES"),nt.forEach(f),Ue=E(T),fe=b(T,"UL",{});var it=v(fe);for(let we=0;we<L.length;we+=1)L[we].l(it);it.forEach(f),T.forEach(f),Le=E(M),M.forEach(f),this.h()},h(){N(t,"class","scenario-summary-header"),N(r,"class","scenario-box")},m(R,M){y(R,e,M),c(e,t),c(t,o),c(e,n),c(e,r),c(r,u),c(u,a),c(a,s),c(u,_),c(u,d),c(d,m),c(m,D),c(d,w),B&&B.m(d,null),c(r,g),c(r,U),c(r,G),c(r,A),c(A,te),c(r,K),c(r,P),c(P,Z),c(r,$),c(r,ae),c(ae,Ie),c(r,re),c(r,oe),c(oe,de),c(r,ue),c(r,He),c(r,Oe),c(r,X),c(X,W),c(r,Re),c(r,Q);for(let j=0;j<Y.length;j+=1)Y[j].m(Q,null);c(r,De),c(r,me),c(r,pe),c(r,ee),c(ee,Pe),c(r,Ue),c(r,fe);for(let j=0;j<L.length;j+=1)L[j].m(fe,null);c(e,Le)},p(R,M){var j,T,se,be,le,ve,ge,Ve,Ye,qe;if(M&1&&l!==(l=R[8].name+"")&&x(o,l),M&1&&h!==(h=(((T=(j=R[8].contents)==null?void 0:j.overview)==null?void 0:T.name)||"")+"")&&x(s,h),M&1&&O!==(O=(((se=R[8].contents)==null?void 0:se.name)||"")+"")&&x(D,O),((be=R[8].contents)==null?void 0:be.source)!="N/A"?B?B.p(R,M):(B=vt(R),B.c(),B.m(d,null)):B&&(B.d(1),B=null),M&1&&V!==(V=(((ve=(le=R[8].contents)==null?void 0:le.overview)==null?void 0:ve.purpose)||"")+"")&&x(Z,V),M&1&&ce!==(ce=(((Ve=(ge=R[8].contents)==null?void 0:ge.overview)==null?void 0:Ve.scope)||"")+"")&&x(de,ce),M&1){q=((Ye=R[8].contents)==null?void 0:Ye.overview.objectives)||[];let S;for(S=0;S<q.length;S+=1){const ke=bt(R,q,S);Y[S]?Y[S].p(ke,M):(Y[S]=gt(ke),Y[S].c(),Y[S].m(Q,null))}for(;S<Y.length;S+=1)Y[S].d(1);Y.length=q.length}if(M&5){ne=Object.entries(((qe=R[8].contents)==null?void 0:qe.modules)||[]);let S;for(S=0;S<ne.length;S+=1){const ke=pt(R,ne,S);L[S]?L[S].p(ke,M):(L[S]=kt(ke),L[S].c(),L[S].m(fe,null))}for(;S<L.length;S+=1)L[S].d(1);L.length=ne.length}},d(R){R&&f(e),B&&B.d(),Be(Y,R),Be(L,R)}}}function ll(i){let e,t,l,o,n,r,u,a;function h(d,m){return d[1]?xt:$t}let s=h(i),_=s(i);return{c(){e=p("hgroup"),t=p("h1"),l=I("Scenarios"),o=k(),n=p("h2"),r=I("What kind of exercise do you want to play?"),u=k(),_.c(),a=J()},l(d){e=b(d,"HGROUP",{});var m=v(e);t=b(m,"H1",{});var O=v(t);l=H(O,"Scenarios"),O.forEach(f),o=E(m),n=b(m,"H2",{});var D=v(n);r=H(D,"What kind of exercise do you want to play?"),D.forEach(f),m.forEach(f),u=E(d),_.l(d),a=J()},m(d,m){y(d,e,m),c(e,t),c(t,l),c(e,o),c(e,n),c(n,r),y(d,u,m),_.m(d,m),y(d,a,m)},p(d,[m]){s===(s=h(d))&&_?_.p(d,m):(_.d(1),_=s(d),_&&(_.c(),_.m(a.parentNode,a)))},i:F,o:F,d(d){d&&f(e),d&&f(u),_.d(d),d&&f(a)}}}function rl(i,e,t){let{scenarioChosen:l=!1}=e,o=[],n=!1,{scenarioID:r=""}=e,{moduleID:u=""}=e;rt(async()=>{const s=await Ct();t(0,o=s)});function a(s,_){t(4,r=s),t(5,u=_),t(3,l=!0),document.body.scrollTop=0,document.documentElement.scrollTop=0}const h=(s,_)=>a(s.id,_);return i.$$set=s=>{"scenarioChosen"in s&&t(3,l=s.scenarioChosen),"scenarioID"in s&&t(4,r=s.scenarioID),"moduleID"in s&&t(5,u=s.moduleID)},t(1,n=!0),[o,n,a,l,r,u,h]}class ol extends Qe{constructor(e){super(),Ke(this,e,rl,ll,Ze,{scenarioChosen:3,scenarioID:4,moduleID:5})}}function nl(i){let e;return{c(){e=p("progressbar")},l(t){e=b(t,"PROGRESSBAR",{}),v(e).forEach(f)},m(t,l){y(t,e,l)},p:F,i:F,o:F,d(t){t&&f(e)}}}function il(i){let e,t;return e=new Rt({}),{c(){$e(e.$$.fragment)},l(l){xe(e.$$.fragment,l)},m(l,o){et(e,l,o),t=!0},p:F,i(l){t||(ye(e.$$.fragment,l),t=!0)},o(l){Ee(e.$$.fragment,l),t=!1},d(l){tt(e,l)}}}function sl(i){let e,t,l,o,n,r,u,a,h;const s=[ul,cl,al],_=[];function d(m,O){return m[0]==!0&&m[1]==!0?0:m[0]==!1?1:2}return e=d(i),t=_[e]=s[e](i),r=new Rt({}),{c(){t.c(),l=k(),o=p("hr"),n=k(),$e(r.$$.fragment),u=k(),a=p("pre")},l(m){t.l(m),l=E(m),o=b(m,"HR",{}),n=E(m),xe(r.$$.fragment,m),u=E(m),a=b(m,"PRE",{}),v(a).forEach(f)},m(m,O){_[e].m(m,O),y(m,l,O),y(m,o,O),y(m,n,O),et(r,m,O),y(m,u,O),y(m,a,O),h=!0},p(m,O){let D=e;e=d(m),e===D?_[e].p(m,O):(Ot(),Ee(_[D],1,1,()=>{_[D]=null}),Ht(),t=_[e],t?t.p(m,O):(t=_[e]=s[e](m),t.c()),ye(t,1),t.m(l.parentNode,l))},i(m){h||(ye(t),ye(r.$$.fragment,m),h=!0)},o(m){Ee(t),Ee(r.$$.fragment,m),h=!1},d(m){_[e].d(m),m&&f(l),m&&f(o),m&&f(n),tt(r,m),m&&f(u),m&&f(a)}}}function al(i){let e,t,l,o,n;function r(s){i[14](s)}function u(s){i[15](s)}function a(s){i[16](s)}let h={};return i[4]!==void 0&&(h.emails=i[4]),i[5]!==void 0&&(h.usersIDs=i[5]),i[1]!==void 0&&(h.emailsPicked=i[1]),e=new Vt({props:h}),Se.push(()=>Ne(e,"emails",r)),Se.push(()=>Ne(e,"usersIDs",u)),Se.push(()=>Ne(e,"emailsPicked",a)),{c(){$e(e.$$.fragment)},l(s){xe(e.$$.fragment,s)},m(s,_){et(e,s,_),n=!0},p(s,_){const d={};!t&&_&16&&(t=!0,d.emails=s[4],Ae(()=>t=!1)),!l&&_&32&&(l=!0,d.usersIDs=s[5],Ae(()=>l=!1)),!o&&_&2&&(o=!0,d.emailsPicked=s[1],Ae(()=>o=!1)),e.$set(d)},i(s){n||(ye(e.$$.fragment,s),n=!0)},o(s){Ee(e.$$.fragment,s),n=!1},d(s){tt(e,s)}}}function cl(i){let e,t,l,o,n;function r(s){i[11](s)}function u(s){i[12](s)}function a(s){i[13](s)}let h={};return i[0]!==void 0&&(h.scenarioChosen=i[0]),i[2]!==void 0&&(h.scenarioID=i[2]),i[3]!==void 0&&(h.moduleID=i[3]),e=new ol({props:h}),Se.push(()=>Ne(e,"scenarioChosen",r)),Se.push(()=>Ne(e,"scenarioID",u)),Se.push(()=>Ne(e,"moduleID",a)),{c(){$e(e.$$.fragment)},l(s){xe(e.$$.fragment,s)},m(s,_){et(e,s,_),n=!0},p(s,_){const d={};!t&&_&1&&(t=!0,d.scenarioChosen=s[0],Ae(()=>t=!1)),!l&&_&4&&(l=!0,d.scenarioID=s[2],Ae(()=>l=!1)),!o&&_&8&&(o=!0,d.moduleID=s[3],Ae(()=>o=!1)),e.$set(d)},i(s){n||(ye(e.$$.fragment,s),n=!0)},o(s){Ee(e.$$.fragment,s),n=!1},d(s){tt(e,s)}}}function ul(i){let e,t,l={ctx:i,current:null,token:null,hasCatch:!0,pending:_l,then:hl,catch:fl,value:20,error:21};return lt(t=i[7](i[5]),l),{c(){e=J(),l.block.c()},l(o){e=J(),l.block.l(o)},m(o,n){y(o,e,n),l.block.m(o,l.anchor=n),l.mount=()=>e.parentNode,l.anchor=e},p(o,n){i=o,l.ctx=i,n&32&&t!==(t=i[7](i[5]))&&lt(t,l)||It(l,i,n)},i:F,o:F,d(o){o&&f(e),l.block.d(o),l.token=null,l=null}}}function fl(i){let e=i[21]+"",t;return{c(){t=I(e)},l(l){t=H(l,e)},m(l,o){y(l,t,o)},p(l,o){o&32&&e!==(e=l[21]+"")&&x(t,e)},d(l){l&&f(t)}}}function hl(i){let e,t,l,o,n,r,u,a,h,s,_,d,m,O,D,w;function g(){return i[9](i[20])}function U(){return i[10](i[20])}return{c(){e=p("hgroup"),t=p("h1"),l=I("Success! Your room has been created!"),o=k(),n=p("h2"),r=I("Get your colleagues together for the exercise."),u=k(),a=p("div"),h=p("button"),s=I("Click here to copy the room code to your clipboard."),d=k(),m=p("button"),O=I("Click here to enter the gameroom"),this.h()},l(G){e=b(G,"HGROUP",{});var A=v(e);t=b(A,"H1",{});var te=v(t);l=H(te,"Success! Your room has been created!"),te.forEach(f),o=E(A),n=b(A,"H2",{});var K=v(n);r=H(K,"Get your colleagues together for the exercise."),K.forEach(f),A.forEach(f),u=E(G),a=b(G,"DIV",{class:!0});var P=v(a);h=b(P,"BUTTON",{"data-tooltip":!0,class:!0});var V=v(h);s=H(V,"Click here to copy the room code to your clipboard."),V.forEach(f),d=E(P),m=b(P,"BUTTON",{});var Z=v(m);O=H(Z,"Click here to enter the gameroom"),Z.forEach(f),P.forEach(f),this.h()},h(){N(h,"data-tooltip",_=i[20].id),N(h,"class","secondary"),N(a,"class","grid")},m(G,A){y(G,e,A),c(e,t),c(t,l),c(e,o),c(e,n),c(n,r),y(G,u,A),y(G,a,A),c(a,h),c(h,s),c(a,d),c(a,m),c(m,O),D||(w=[he(h,"click",g),he(m,"click",U)],D=!0)},p(G,A){i=G,A&32&&_!==(_=i[20].id)&&N(h,"data-tooltip",_)},d(G){G&&f(e),G&&f(u),G&&f(a),D=!1,yt(w)}}}function _l(i){let e,t,l,o,n,r,u,a,h,s,_;return{c(){e=p("center"),t=p("br"),l=k(),o=p("hgroup"),n=p("h1"),r=I("Creating your room..."),u=k(),a=p("h2"),h=I("Give it a second..."),s=k(),_=p("br"),this.h()},l(d){e=b(d,"CENTER",{});var m=v(e);t=b(m,"BR",{}),l=E(m),o=b(m,"HGROUP",{});var O=v(o);n=b(O,"H1",{"aria-busy":!0});var D=v(n);r=H(D,"Creating your room..."),D.forEach(f),u=E(O),a=b(O,"H2",{});var w=v(a);h=H(w,"Give it a second..."),w.forEach(f),O.forEach(f),s=E(m),_=b(m,"BR",{}),m.forEach(f),this.h()},h(){N(n,"aria-busy","true")},m(d,m){y(d,e,m),c(e,t),c(e,l),c(e,o),c(o,n),c(n,r),c(o,u),c(o,a),c(a,h),c(e,s),c(e,_)},p:F,d(d){d&&f(e)}}}function dl(i){let e,t,l,o;const n=[sl,il,nl],r=[];function u(a,h){return a[6]=="facilitator"?0:a[6]=="observer"||a[6]=="participant"?1:2}return e=u(i),t=r[e]=n[e](i),{c(){t.c(),l=J()},l(a){t.l(a),l=J()},m(a,h){r[e].m(a,h),y(a,l,h),o=!0},p(a,[h]){let s=e;e=u(a),e===s?r[e].p(a,h):(Ot(),Ee(r[s],1,1,()=>{r[s]=null}),Ht(),t=r[e],t?t.p(a,h):(t=r[e]=n[e](a),t.c()),ye(t,1),t.m(l.parentNode,l))},i(a){o||(ye(t),o=!0)},o(a){Ee(t),o=!1},d(a){r[e].d(a),a&&f(l)}}}function ml(i,e,t){let l,o;We(i,ot,P=>t(19,l=P)),We(i,Gt,P=>t(6,o=P));let n=!1,r=!1,u="",a="",h={},s=[],_=[],d={};rt(async()=>{d=await Tt(),l||Xe("/login"),l.org||Xe("/createorg")});async function m(P){h={org:l.org,users:P.concat(l.id),emails:s,currentUsers:0,settings:{},question:0,module:a,scenarios:u};const V={observer_code:d==null?void 0:d.observer_code,participant_code:d==null?void 0:d.participant_code,facilitator_code:d==null?void 0:d.facilitator_code};let Z=`
		<html>
			<img class="gttx-logo" src="https://gttx.app/svg/gttx_white.svg" alt="gttx!" />

			<p>
			Hello! Welcome to GTTX.
			Here is the information to get started:

			observer_code: ${V.observer_code}
			participant_code: ${V.participant_code}
			facilitator_code: ${V.facilitator_code}
			
			GOTO https://gttx.api/blah to get started!
			</p>
		</html>
		`;return h.emailbody=Z,await Je.collection("room").create(h)}async function O(P){console.log("SET ID TO ",P);try{const V=await Je.collection("users").update(l.id,{roomid:P})}catch(V){console.log(V)}finally{Xe("/dashboard/notes")}return record}const D=P=>navigator.clipboard.writeText(P.id),w=P=>O(P.id);function g(P){n=P,t(0,n)}function U(P){u=P,t(2,u)}function G(P){a=P,t(3,a)}function A(P){s=P,t(4,s)}function te(P){_=P,t(5,_)}function K(P){r=P,t(1,r)}return i.$$.update=()=>{i.$$.dirty&31&&(n&&(console.log("scenario has been chosen"),console.log(u,a)),r&&(console.log("emails have been chosen"),console.log(s)))},[n,r,u,a,s,_,o,m,O,D,w,g,U,G,A,te,K]}class El extends Qe{constructor(e){super(),Ke(this,e,ml,dl,Ze,{})}}export{El as default};
