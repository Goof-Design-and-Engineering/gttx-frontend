import{S as Ee,i as ke,s as ye,D as Re,a as R,k as h,e as ce,c as N,l as d,m,h as c,b as E,H as Ne,g as X,w as Be,d as K,f as Ie,L as _e,o as Me,O as Ce,r as k,u as y,v as Q,x as Fe,P as He,z as Oe,A as ge,B as Te,Q as Se,C as we,R as ze,n as G,p as S,G as f,T as Le,U as Ae,q as De,V as pe,M as J,W as he,X as Pe,Y as Ge,N as Ue}from"../chunks/index.f25a3516.js";import{u as We,v as qe,r as Ve}from"../chunks/validators.75e44f34.js";import{c as Ye,p as Y}from"../chunks/pocketbase.026f421a.js";import{g as oe}from"../chunks/navigation.aabaf4cf.js";import{M as Qe}from"../chunks/Modal.5439fec8.js";function de(n,e,l){const t=n.slice();return t[17]=e[l],t[19]=l,t}function me(n){let e;return{c(){e=k(n[2])},l(l){e=y(l,n[2])},m(l,t){E(l,e,t)},p(l,t){t&4&&Q(e,l[2])},d(l){l&&c(e)}}}function Xe(n){return{c:G,l:G,m:G,p:G,d:G}}function je(n){let e,l,t,p,a,r,o,i,s=[],_=new Map,b,O,B,w,I,C,P=n[1];const g=u=>u[17].id;for(let u=0;u<P.length;u+=1){let v=de(n,P,u),T=g(v);_.set(T,s[u]=be(T,v))}return{c(){e=h("header"),l=h("hgroup"),t=h("h1"),p=k(n[0]),a=R(),r=h("h2"),o=k("Time for a change?"),i=R();for(let u=0;u<s.length;u+=1)s[u].c();b=R(),O=h("footer"),B=h("br"),w=R(),I=h("button"),C=k("Save Changes"),this.h()},l(u){e=d(u,"HEADER",{});var v=m(e);l=d(v,"HGROUP",{});var T=m(l);t=d(T,"H1",{});var q=m(t);p=y(q,n[0]),q.forEach(c),a=N(T),r=d(T,"H2",{});var V=m(r);o=y(V,"Time for a change?"),V.forEach(c),T.forEach(c),v.forEach(c),i=N(u);for(let U=0;U<s.length;U+=1)s[U].l(u);b=N(u),O=d(u,"FOOTER",{});var L=m(O);B=d(L,"BR",{}),w=N(L),I=d(L,"BUTTON",{class:!0});var M=m(I);C=y(M,"Save Changes"),M.forEach(c),L.forEach(c),this.h()},h(){S(I,"class","outline")},m(u,v){E(u,e,v),f(e,l),f(l,t),f(t,p),f(l,a),f(l,r),f(r,o),E(u,i,v);for(let T=0;T<s.length;T+=1)s[T].m(u,v);E(u,b,v),E(u,O,v),f(O,B),f(O,w),f(O,I),f(I,C)},p(u,v){v&1&&Q(p,u[0]),v&578&&(P=u[1],s=Le(s,v,g,1,u,P,_,b.parentNode,Ae,be,b,de))},d(u){u&&c(e),u&&c(i);for(let v=0;v<s.length;v+=1)s[v].d(u);u&&c(b),u&&c(O)}}}function Je(n){let e=n[17].username+"",l;return{c(){l=k(e)},l(t){l=y(t,e)},m(t,p){E(t,l,p)},p(t,p){p&2&&e!==(e=t[17].username+"")&&Q(l,e)},d(t){t&&c(l)}}}function Ke(n){let e,l=n[17].username+"",t,p;return{c(){e=h("b"),t=k(l),p=k(" (that's you!)")},l(a){e=d(a,"B",{});var r=m(e);t=y(r,l),p=y(r," (that's you!)"),r.forEach(c)},m(a,r){E(a,e,r),f(e,t),f(e,p)},p(a,r){r&2&&l!==(l=a[17].username+"")&&Q(t,l)},d(a){a&&c(e)}}}function Ze(n){let e,l,t,p,a,r;function o(_,b){return _[17].role=="facilitator"?tt:_[17].role=="participant"?et:xe}let i=o(n),s=i(n);return{c(){e=h("select"),s.c(),l=R(),t=h("button"),p=k("Remove"),this.h()},l(_){e=d(_,"SELECT",{});var b=m(e);s.l(b),b.forEach(c),l=N(_),t=d(_,"BUTTON",{class:!0});var O=m(t);p=y(O,"Remove"),O.forEach(c),this.h()},h(){S(t,"class","primary")},m(_,b){E(_,e,b),s.m(e,null),E(_,l,b),E(_,t,b),f(t,p),a||(r=J(t,"click",function(){Pe(n[9](n[17]))&&n[9](n[17]).apply(this,arguments)}),a=!0)},p(_,b){n=_,i!==(i=o(n))&&(s.d(1),s=i(n),s&&(s.c(),s.m(e,null)))},d(_){_&&c(e),s.d(),_&&c(l),_&&c(t),a=!1,r()}}}function $e(n){let e,l,t,p,a,r;return{c(){e=h("select"),l=h("option"),t=k("Facilitator"),p=R(),a=h("button"),r=k("Remove"),this.h()},l(o){e=d(o,"SELECT",{});var i=m(e);l=d(i,"OPTION",{});var s=m(l);t=y(s,"Facilitator"),s.forEach(c),i.forEach(c),p=N(o),a=d(o,"BUTTON",{class:!0});var _=m(a);r=y(_,"Remove"),_.forEach(c),this.h()},h(){l.__value="facilitator",l.value=l.__value,e.disabled=!0,S(a,"class","primary"),a.disabled="true"},m(o,i){E(o,e,i),f(e,l),f(l,t),E(o,p,i),E(o,a,i),f(a,r)},p:G,d(o){o&&c(e),o&&c(p),o&&c(a)}}}function xe(n){let e,l,t,p,a,r;return{c(){e=h("option"),l=k("Facilitator"),t=h("option"),p=k("Participant"),a=h("option"),r=k("Observer"),this.h()},l(o){e=d(o,"OPTION",{});var i=m(e);l=y(i,"Facilitator"),i.forEach(c),t=d(o,"OPTION",{});var s=m(t);p=y(s,"Participant"),s.forEach(c),a=d(o,"OPTION",{});var _=m(a);r=y(_,"Observer"),_.forEach(c),this.h()},h(){e.__value="facilitator",e.value=e.__value,t.__value="participant",t.value=t.__value,a.__value="observer",a.value=a.__value,a.selected=!0},m(o,i){E(o,e,i),f(e,l),E(o,t,i),f(t,p),E(o,a,i),f(a,r)},d(o){o&&c(e),o&&c(t),o&&c(a)}}}function et(n){let e,l,t,p,a,r;return{c(){e=h("option"),l=k("Facilitator"),t=h("option"),p=k("Participant"),a=h("option"),r=k("Observer"),this.h()},l(o){e=d(o,"OPTION",{});var i=m(e);l=y(i,"Facilitator"),i.forEach(c),t=d(o,"OPTION",{});var s=m(t);p=y(s,"Participant"),s.forEach(c),a=d(o,"OPTION",{});var _=m(a);r=y(_,"Observer"),_.forEach(c),this.h()},h(){e.__value="facilitator",e.value=e.__value,t.__value="participant",t.value=t.__value,t.selected=!0,a.__value="observer",a.value=a.__value},m(o,i){E(o,e,i),f(e,l),E(o,t,i),f(t,p),E(o,a,i),f(a,r)},d(o){o&&c(e),o&&c(t),o&&c(a)}}}function tt(n){let e,l,t,p,a,r;return{c(){e=h("option"),l=k("Facilitator"),t=h("option"),p=k("Participant"),a=h("option"),r=k("Observer"),this.h()},l(o){e=d(o,"OPTION",{});var i=m(e);l=y(i,"Facilitator"),i.forEach(c),t=d(o,"OPTION",{});var s=m(t);p=y(s,"Participant"),s.forEach(c),a=d(o,"OPTION",{});var _=m(a);r=y(_,"Observer"),_.forEach(c),this.h()},h(){e.__value="facilitator",e.value=e.__value,e.selected=!0,t.__value="participant",t.value=t.__value,a.__value="observer",a.value=a.__value},m(o,i){E(o,e,i),f(e,l),E(o,t,i),f(t,p),E(o,a,i),f(a,r)},d(o){o&&c(e),o&&c(t),o&&c(a)}}}function be(n,e){let l,t,p,a,r,o,i,s,_,b;function O(g,u){return g[17].id==g[6].id?Ke:Je}let B=O(e),w=B(e);function I(g,u){return g[17].id==g[6].id?$e:Ze}let C=I(e),P=C(e);return{key:n,first:null,c(){l=h("div"),w.c(),t=R(),p=h("hr"),a=R(),r=h("div"),o=h("input"),s=R(),P.c(),_=R(),b=h("br"),this.h()},l(g){l=d(g,"DIV",{});var u=m(l);w.l(u),t=N(u),p=d(u,"HR",{}),a=N(u),r=d(u,"DIV",{class:!0});var v=m(r);o=d(v,"INPUT",{type:!0,"aria-invalid":!0}),s=N(v),P.l(v),v.forEach(c),u.forEach(c),_=N(g),b=d(g,"BR",{}),this.h()},h(){S(o,"type","text"),o.value=i=e[17].email,S(o,"aria-invalid","false"),o.disabled=!0,S(r,"class","grid"),this.first=l},m(g,u){E(g,l,u),w.m(l,null),f(l,t),f(l,p),f(l,a),f(l,r),f(r,o),f(r,s),P.m(r,null),E(g,_,u),E(g,b,u)},p(g,u){e=g,B===(B=O(e))&&w?w.p(e,u):(w.d(1),w=B(e),w&&(w.c(),w.m(l,t))),u&2&&i!==(i=e[17].email)&&o.value!==i&&(o.value=i),C===(C=I(e))&&P?P.p(e,u):(P.d(1),P=C(e),P&&(P.c(),P.m(r,null)))},d(g){g&&c(l),w.d(),P.d(),g&&c(_),g&&c(b)}}}function lt(n){let e,l,t,p,a,r,o,i,s;return{c(){e=h("center"),l=h("br"),t=R(),p=h("hgroup"),a=h("h1"),r=k("Loading..."),o=R(),i=h("h2"),s=k("Give it a second..."),this.h()},l(_){e=d(_,"CENTER",{});var b=m(e);l=d(b,"BR",{}),t=N(b),p=d(b,"HGROUP",{});var O=m(p);a=d(O,"H1",{"aria-busy":!0});var B=m(a);r=y(B,"Loading..."),B.forEach(c),o=N(O),i=d(O,"H2",{});var w=m(i);s=y(w,"Give it a second..."),w.forEach(c),O.forEach(c),b.forEach(c),this.h()},h(){S(a,"aria-busy","true")},m(_,b){E(_,e,b),f(e,l),f(e,t),f(e,p),f(p,a),f(a,r),f(p,o),f(p,i),f(i,s)},p:G,d(_){_&&c(e)}}}function ve(n){let e,l,t;function p(r){n[14](r)}let a={$$slots:{default:[ot]},$$scope:{ctx:n}};return n[3]!==void 0&&(a.showModal=n[3]),e=new Qe({props:a}),Fe.push(()=>He(e,"showModal",p)),{c(){Oe(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,o){Te(e,r,o),t=!0},p(r,o){const i={};o&1048752&&(i.$$scope={dirty:o,ctx:r}),!l&&o&8&&(l=!0,i.showModal=r[3],Se(()=>l=!1)),e.$set(i)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){K(e.$$.fragment,r),t=!1},d(r){we(e,r)}}}function ot(n){let e,l,t,p,a,r,o,i=n[4].username+"",s,_,b,O,B,w,I=n[4].username+"",C,P,g,u,v,T,q,V,L,M,U,Z,z,$,x,ee,A,te,j,le,ae;return{c(){e=h("article"),l=h("h3"),t=k("Woah there!"),p=R(),a=h("p"),r=k("Are you sure that you want to remove "),o=h("b"),s=k(i),_=k(` from your organization?
				`),b=h("br"),O=h("br"),B=k(`
				If you change your mind, you'll have to send `),w=h("b"),C=k(I),P=k(` another invite.
				`),g=h("br"),u=h("br"),v=R(),T=h("b"),q=k("This action can not be undone!"),V=R(),L=h("footer"),M=h("form"),U=h("br"),Z=R(),z=h("input"),$=R(),x=h("br"),ee=R(),A=h("button"),te=k("Confirm"),this.h()},l(W){e=d(W,"ARTICLE",{});var F=m(e);l=d(F,"H3",{});var re=m(l);t=y(re,"Woah there!"),re.forEach(c),p=N(F),a=d(F,"P",{});var H=m(a);r=y(H,"Are you sure that you want to remove "),o=d(H,"B",{});var ie=m(o);s=y(ie,i),ie.forEach(c),_=y(H,` from your organization?
				`),b=d(H,"BR",{}),O=d(H,"BR",{}),B=y(H,`
				If you change your mind, you'll have to send `),w=d(H,"B",{});var ne=m(w);C=y(ne,I),ne.forEach(c),P=y(H,` another invite.
				`),g=d(H,"BR",{}),u=d(H,"BR",{}),v=N(H),T=d(H,"B",{style:!0});var se=m(T);q=y(se,"This action can not be undone!"),se.forEach(c),H.forEach(c),V=N(F),L=d(F,"FOOTER",{});var ue=m(L);M=d(ue,"FORM",{method:!0});var D=m(M);U=d(D,"BR",{}),Z=N(D),z=d(D,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),$=N(D),x=d(D,"BR",{}),ee=N(D),A=d(D,"BUTTON",{"data-target":!0});var fe=m(A);te=y(fe,"Confirm"),fe.forEach(c),D.forEach(c),ue.forEach(c),F.forEach(c),this.h()},h(){De(T,"color","red"),S(z,"type","password"),S(z,"name","del_confirm_pass"),S(z,"id","del_confrim_pass"),S(z,"placeholder","Your current password, please!"),S(A,"data-target","modal-example"),A.disabled=j=!n[7].valid,S(M,"method","POST")},m(W,F){E(W,e,F),f(e,l),f(l,t),f(e,p),f(e,a),f(a,r),f(a,o),f(o,s),f(a,_),f(a,b),f(a,O),f(a,B),f(a,w),f(w,C),f(a,P),f(a,g),f(a,u),f(a,v),f(a,T),f(T,q),f(e,V),f(e,L),f(L,M),f(M,U),f(M,Z),f(M,z),pe(z,n[5]),f(M,$),f(M,x),f(M,ee),f(M,A),f(A,te),le||(ae=[J(z,"input",n[13]),he(qe.call(null,z,[Ve])),J(A,"click",function(){Pe(n[11](n[4].id))&&n[11](n[4].id).apply(this,arguments)}),he(n[8].call(null,M)),J(M,"submit",Ge(n[12]))],le=!0)},p(W,F){n=W,F&16&&i!==(i=n[4].username+"")&&Q(s,i),F&16&&I!==(I=n[4].username+"")&&Q(C,I),F&32&&z.value!==n[5]&&pe(z,n[5]),F&128&&j!==(j=!n[7].valid)&&(A.disabled=j)},d(W){W&&c(e),le=!1,Ue(ae)}}}function at(n){let e,l,t,p,a,r=n[2]!=""&&me(n),o={ctx:n,current:null,token:null,hasCatch:!1,pending:lt,then:je,catch:Xe};Re(n[10](),o);let i=n[3]&&ve(n);return{c(){r&&r.c(),e=R(),l=h("article"),o.block.c(),t=R(),i&&i.c(),p=ce()},l(s){r&&r.l(s),e=N(s),l=d(s,"ARTICLE",{});var _=m(l);o.block.l(_),_.forEach(c),t=N(s),i&&i.l(s),p=ce()},m(s,_){r&&r.m(s,_),E(s,e,_),E(s,l,_),o.block.m(l,o.anchor=null),o.mount=()=>l,o.anchor=null,E(s,t,_),i&&i.m(s,_),E(s,p,_),a=!0},p(s,[_]){n=s,n[2]!=""?r?r.p(n,_):(r=me(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),Ne(o,n,_),n[3]?i?(i.p(n,_),_&8&&X(i,1)):(i=ve(n),i.c(),X(i,1),i.m(p.parentNode,p)):i&&(Be(),K(i,1,1,()=>{i=null}),Ie())},i(s){a||(X(i),a=!0)},o(s){K(i),a=!1},d(s){r&&r.d(s),s&&c(e),s&&c(l),o.block.d(),o.token=null,o=null,s&&c(t),i&&i.d(s),s&&c(p)}}}function rt(n,e,l){let t,p;_e(n,Ye,u=>l(6,t=u));const a=We();_e(n,a,u=>l(7,p=u));let r,o,i=[],s="",_=!1,b;var O="";function B(u){l(4,b=u),l(3,_=!0)}Me(async()=>{if(t==null){oe("createorg");return}if((t==null?void 0:t.org)==""){oe("createorg");return}if(t.role!="facilitator"){oe("/dashboard");return}}),Ce(()=>{r==null||r()});async function w(){const u=await Y.collection("organization").getOne(t==null?void 0:t.org,{expand:"members"});l(1,i=[...i,...u.expand.members]),l(0,o=u.name),r=await Y.collection("organization").subscribe(t==null?void 0:t.org,async function(v){console.log(v.record);const T=await Y.collection("organization").getOne(v.record.id,{expand:"members"});l(1,i=T.expand.members)})}async function I(u){try{await Y.collection("users").authWithPassword(t.email,O)}catch{alert("Your password was incorrect!");return}try{await Y.collection("users").update(u,{org:""})}catch(T){deleting=!1,console.log(T),alert("Something went wrong, please try again!");return}const v=i.filter(T=>T.id!==u);console.log(v),Y.collection("organization").update(t==null?void 0:t.org,{members:v.map(T=>T.id)})}function C(u){ze.call(this,n,u)}function P(){O=this.value,l(5,O)}function g(u){_=u,l(3,_)}return[o,i,s,_,b,O,t,p,a,B,w,I,C,P,g]}class it extends Ee{constructor(e){super(),ke(this,e,rt,at,ye,{})}}function nt(n){let e,l;return e=new it({}),{c(){Oe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,p){Te(e,t,p),l=!0},p:G,i(t){l||(X(e.$$.fragment,t),l=!0)},o(t){K(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}class pt extends Ee{constructor(e){super(),ke(this,e,null,nt,ye,{})}}export{pt as default};
