import{S as ce,i as fe,s as de,a as O,k as p,r as z,z as K,c as T,l as _,m as b,u as C,h as l,A as Q,p as $,b as L,G as i,O as se,B as W,M as D,a4 as ie,a5 as me,g as X,d as Z,C as x,N as pe,L as le,o as _e,v as ge,Y as he,n as be}from"../chunks/index.b95161bf.js";import{c as ve,p as A}from"../chunks/pocketbase.c09fd52b.js";import{H as $e,a as Ee}from"../chunks/HintGroup.a676afc4.js";import{v as ye,r as we,u as Ne}from"../chunks/validators.c220a831.js";import{g as H}from"../chunks/navigation.7a5a56af.js";function ue(s){let e,t;return{c(){e=p("p"),t=z(s[1])},l(a){e=_(a,"P",{});var r=b(e);t=C(r,s[1]),r.forEach(l)},m(a,r){L(a,e,r),i(e,t)},p(a,r){r&2&&ge(t,a[1])},d(a){a&&l(e)}}}function Oe(s){let e;return{c(){e=z("This is a mandatory field")},l(t){e=C(t,"This is a mandatory field")},m(t,a){L(t,e,a)},d(t){t&&l(e)}}}function Te(s){let e,t;return e=new Ee({props:{on:"required",$$slots:{default:[Oe]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,r){W(e,a,r),t=!0},p(a,r){const o={};r&2048&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){t||(X(e.$$.fragment,a),t=!0)},o(a){Z(e.$$.fragment,a),t=!1},d(a){x(e,a)}}}function ze(s){let e,t,a,r,o,g,m,y,k,B,d,I,u,w,h,v,V,P,j,N,F,J,S,Y,M,R,ee,c=s[1]&&ue(s);return u=new $e({props:{for:"organization",$$slots:{default:[Te]},$$scope:{ctx:s}}}),{c(){c&&c.c(),e=O(),t=p("h1"),a=z("Create an org"),r=O(),o=p("form"),g=p("div"),m=p("div"),y=p("label"),k=z("Organization Name"),B=O(),d=p("input"),I=O(),K(u.$$.fragment),w=O(),h=p("div"),v=p("button"),V=z("Sign up"),j=O(),N=p("button"),F=z("Nevermind, sign out"),J=O(),S=p("button"),Y=z("Join an org instead"),this.h()},l(n){c&&c.l(n),e=T(n),t=_(n,"H1",{class:!0});var f=b(t);a=C(f,"Create an org"),f.forEach(l),r=T(n),o=_(n,"FORM",{method:!0});var E=b(o);g=_(E,"DIV",{class:!0});var te=b(g);m=_(te,"DIV",{});var U=b(m);y=_(U,"LABEL",{for:!0});var ae=b(y);k=C(ae,"Organization Name"),ae.forEach(l),B=T(U),d=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),I=T(U),Q(u.$$.fragment,U),U.forEach(l),te.forEach(l),w=T(E),h=_(E,"DIV",{class:!0});var q=b(h);v=_(q,"BUTTON",{});var re=b(v);V=C(re,"Sign up"),re.forEach(l),j=T(q),N=_(q,"BUTTON",{class:!0});var ne=b(N);F=C(ne,"Nevermind, sign out"),ne.forEach(l),q.forEach(l),J=T(E),S=_(E,"BUTTON",{});var oe=b(S);Y=C(oe,"Join an org instead"),oe.forEach(l),E.forEach(l),this.h()},h(){$(t,"class","page-name-header"),$(y,"for","organization"),$(d,"type","username"),$(d,"name","organization"),$(d,"id","username"),$(d,"placeholder","Goof, LLC"),$(g,"class","grid"),v.disabled=P=!s[2].valid,$(N,"class","secondary"),$(h,"class","grid"),$(o,"method","POST")},m(n,f){c&&c.m(n,f),L(n,e,f),L(n,t,f),i(t,a),L(n,r,f),L(n,o,f),i(o,g),i(g,m),i(m,y),i(y,k),i(m,B),i(m,d),se(d,s[0]),i(m,I),W(u,m,null),i(o,w),i(o,h),i(h,v),i(v,V),i(h,j),i(h,N),i(N,F),i(o,J),i(o,S),i(S,Y),M=!0,R||(ee=[D(d,"input",s[8]),ie(ye.call(null,d,[we])),D(v,"click",s[4]),D(N,"click",s[6]),D(S,"click",s[5]),ie(s[3].call(null,o)),D(o,"submit",me(s[7]))],R=!0)},p(n,[f]){n[1]?c?c.p(n,f):(c=ue(n),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),f&1&&se(d,n[0]);const E={};f&2048&&(E.$$scope={dirty:f,ctx:n}),u.$set(E),(!M||f&4&&P!==(P=!n[2].valid))&&(v.disabled=P)},i(n){M||(X(u.$$.fragment,n),M=!0)},o(n){Z(u.$$.fragment,n),M=!1},d(n){c&&c.d(n),n&&l(e),n&&l(t),n&&l(r),n&&l(o),x(u),R=!1,pe(ee)}}}function G(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.substr(0,3).toUpperCase();let r=a;for(let o=0;o<8-a.length;o++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}function Ce(s,e,t){let a,r;le(s,ve,u=>t(9,a=u));const o=Ne();le(s,o,u=>t(2,r=u));let g,m;async function y(){var u;try{console.log(G("test"));const w={name:g,members:[a.id],participant_code:G("participant"),facilitator_code:G("facilitator"),observer_code:G("observer")},h=await A.collection("organization").create(w);if(h!=null){const v={org:h.id};A.collection("users").update((u=A.authStore.model)==null?void 0:u.id,v)}await H("/dashboard")}catch(w){console.log(w),t(1,m=w),await H("/createorg")}}async function k(){H("joinorg")}async function B(){await A.authStore.clear(),H("/")}_e(async()=>{a.org!=""&&H("/dashboard")});function d(u){he.call(this,s,u)}function I(){g=this.value,t(0,g)}return[g,m,r,o,y,k,B,d,I]}class Le extends ce{constructor(e){super(),fe(this,e,Ce,ze,de,{})}}function Se(s){let e,t,a;return t=new Le({}),{c(){e=p("body"),K(t.$$.fragment)},l(r){e=_(r,"BODY",{});var o=b(e);Q(t.$$.fragment,o),o.forEach(l)},m(r,o){L(r,e,o),W(t,e,null),a=!0},p:be,i(r){a||(X(t.$$.fragment,r),a=!0)},o(r){Z(t.$$.fragment,r),a=!1},d(r){r&&l(e),x(t)}}}class De extends ce{constructor(e){super(),fe(this,e,null,Se,de,{})}}export{De as default};
