import{S as ie,i as oe,s as ue,e as ee,b,n as j,h as r,J as fe,o as pe,k as p,r as B,a as $,l as m,m as h,u as T,c as S,q as me,p as d,F as i,Y as te,K as z,Z as ae,v as ce,L as _e,z as de,A as be,B as ve,g as Ee,d as he,C as ye}from"../chunks/index.7f1a9c88.js";import{u as we}from"../chunks/useForm.256e94d5.js";/* empty css                                */import{v as le,r as ne}from"../chunks/validators.9266e364.js";import{c as Pe,p as re}from"../chunks/pocketbase.2fde5c2d.js";import{g as Z}from"../chunks/navigation.e42409cb.js";function se(u){let l,t,n,s=u[2].username+"",o,_,v,y,w,e,E,c,N,P,I,C,A,F,U,O,q,D,k,H,Y,G,g,J,K,Q;return{c(){l=p("hgroup"),t=p("h1"),n=B("Edit settings for "),o=B(s),_=$(),v=p("h2"),y=B("Express yourself!"),w=$(),e=p("label"),E=B(`Username
		
		`),c=p("input"),N=B(`

		Email Address
		
		`),P=p("input"),C=$(),A=p("label"),F=B(`Profile Picture
			`),U=p("input"),O=$(),q=p("br"),D=$(),k=p("div"),H=p("button"),Y=B("Back to Settings"),G=$(),g=p("button"),J=B("Submit"),this.h()},l(a){l=m(a,"HGROUP",{});var f=h(l);t=m(f,"H1",{style:!0});var M=h(t);n=T(M,"Edit settings for "),o=T(M,s),M.forEach(r),_=S(f),v=m(f,"H2",{});var W=h(v);y=T(W,"Express yourself!"),W.forEach(r),f.forEach(r),w=S(a),e=m(a,"LABEL",{});var L=h(e);E=T(L,`Username
		
		`),c=m(L,"INPUT",{type:!0,name:!0,id:!0}),N=T(L,`

		Email Address
		
		`),P=m(L,"INPUT",{type:!0,name:!0,id:!0}),C=S(L),A=m(L,"LABEL",{for:!0});var V=h(A);F=T(V,`Profile Picture
			`),U=m(V,"INPUT",{type:!0,id:!0,name:!0,accept:!0}),V.forEach(r),L.forEach(r),O=S(a),q=m(a,"BR",{}),D=S(a),k=m(a,"DIV",{class:!0});var R=h(k);H=m(R,"BUTTON",{class:!0});var X=h(H);Y=T(X,"Back to Settings"),X.forEach(r),G=S(R),g=m(R,"BUTTON",{});var x=h(g);J=T(x,"Submit"),x.forEach(r),R.forEach(r),this.h()},h(){me(t,"font-size","40px"),d(c,"type","text"),d(c,"name","new_username"),d(c,"id","new_username"),d(P,"type","text"),d(P,"name","new_emailaddr"),d(P,"id","new_emailaddr"),P.value=I=u[2].email,P.disabled=!0,d(U,"type","file"),d(U,"id","pfp"),d(U,"name","pfp"),d(U,"accept","image/*"),U.disabled=!0,d(A,"for","file"),d(H,"class","secondary"),d(k,"class","grid")},m(a,f){b(a,l,f),i(l,t),i(t,n),i(t,o),i(l,_),i(l,v),i(v,y),b(a,w,f),b(a,e,f),i(e,E),i(e,c),te(c,u[0]),i(e,N),i(e,P),i(e,C),i(e,A),i(A,F),i(A,U),b(a,O,f),b(a,q,f),b(a,D,f),b(a,k,f),i(k,H),i(H,Y),i(k,G),i(k,g),i(g,J),K||(Q=[z(c,"input",u[5]),ae(le.call(null,c,[ne])),ae(le.call(null,P,[ne])),z(U,"change",u[6]),z(H,"click",u[4]),z(g,"click",u[3])],K=!0)},p(a,f){f&4&&s!==(s=a[2].username+"")&&ce(o,s),f&1&&c.value!==a[0]&&te(c,a[0]),f&4&&I!==(I=a[2].email)&&P.value!==I&&(P.value=I)},d(a){a&&r(l),a&&r(w),a&&r(e),a&&r(O),a&&r(q),a&&r(D),a&&r(k),K=!1,_e(Q)}}}function Ue(u){let l,t=u[2]&&se(u);return{c(){t&&t.c(),l=ee()},l(n){t&&t.l(n),l=ee()},m(n,s){t&&t.m(n,s),b(n,l,s)},p(n,[s]){n[2]?t?t.p(n,s):(t=se(n),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:j,o:j,d(n){t&&t.d(n),n&&r(l)}}}function ke(u,l,t){let n;fe(u,Pe,e=>t(2,n=e));var s="",o="";async function _(){try{await re.collection("users").update(n.id,{username:s}),o!=""&&await re.collection("users").update(n.id,{avatar:o}),Z("/account")}catch(e){console.log(e),alert("Something went wrong, please try again!")}}async function v(){Z("/account")}pe(()=>{n?t(0,s=n.username):Z("/login")});function y(){s=this.value,t(0,s)}function w(){o=this.value,t(1,o)}return[s,o,n,_,v,y,w]}class Be extends ie{constructor(l){super(),oe(this,l,ke,Ue,ue,{})}}function Te(u){let l,t,n,s,o,_,v,y,w;return _=new Be({}),{c(){l=p("head"),t=p("title"),n=B("Hello, world!"),s=$(),o=p("body"),de(_.$$.fragment),v=$(),y=p("pre")},l(e){l=m(e,"HEAD",{});var E=h(l);t=m(E,"TITLE",{});var c=h(t);n=T(c,"Hello, world!"),c.forEach(r),E.forEach(r),s=S(e),o=m(e,"BODY",{});var N=h(o);be(_.$$.fragment,N),N.forEach(r),v=S(e),y=m(e,"PRE",{}),h(y).forEach(r)},m(e,E){b(e,l,E),i(l,t),i(t,n),b(e,s,E),b(e,o,E),ve(_,o,null),b(e,v,E),b(e,y,E),w=!0},p:j,i(e){w||(Ee(_.$$.fragment,e),w=!0)},o(e){he(_.$$.fragment,e),w=!1},d(e){e&&r(l),e&&r(s),e&&r(o),ye(_),e&&r(v),e&&r(y)}}}function $e(u){return we(),[]}class Ie extends ie{constructor(l){super(),oe(this,l,$e,Te,ue,{})}}export{Ie as default};
