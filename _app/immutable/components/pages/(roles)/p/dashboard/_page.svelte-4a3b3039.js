import{_ as B}from"../../../../../chunks/preload-helper-41c905a7.js";import{S as R,i as U,s as V,k as v,a as O,q as C,l as h,m as E,h as o,c as k,r as D,n as x,b as m,E as T,J as I,B as P,K as L,I as M,o as N,L as Q,M as W}from"../../../../../chunks/index-effa2c47.js";import{D as A,W as S,Q as J}from"../../../../../chunks/y-websocket-00d63cb4.js";import{c as K}from"../../../../../chunks/pocketbase-6b8fcb7c.js";function j(l){let n,i,u,r,c,a,y,p,b,_,f,t,w,d;return{c(){n=v("div"),i=v("div"),u=O(),r=v("br"),c=O(),a=v("button"),y=C("disconnect"),p=O(),b=v("br"),_=O(),f=v("button"),t=C("connect"),this.h()},l(e){n=h(e,"DIV",{class:!0});var s=E(n);i=h(s,"DIV",{}),E(i).forEach(o),s.forEach(o),u=k(e),r=h(e,"BR",{}),c=k(e),a=h(e,"BUTTON",{});var g=E(a);y=D(g,"disconnect"),g.forEach(o),p=k(e),b=h(e,"BR",{}),_=k(e),f=h(e,"BUTTON",{});var q=E(f);t=D(q,"connect"),q.forEach(o),this.h()},h(){x(n,"class","editor-wrapper")},m(e,s){m(e,n,s),T(n,i),l[3](i),m(e,u,s),m(e,r,s),m(e,c,s),m(e,a,s),T(a,y),m(e,p,s),m(e,b,s),m(e,_,s),m(e,f,s),T(f,t),w||(d=[I(a,"click",function(){Q(console.log(l[1].disconnect()))&&console.log(l[1].disconnect()).apply(this,arguments)}),I(f,"click",function(){Q(console.log(l[1].connect()))&&console.log(l[1].connect()).apply(this,arguments)})],w=!0)},p(e,[s]){l=e},i:P,o:P,d(e){e&&o(n),l[3](null),e&&o(u),e&&o(r),e&&o(c),e&&o(a),e&&o(p),e&&o(b),e&&o(_),e&&o(f),w=!1,L(d)}}}function z(l,n,i){let u;M(l,K,t=>i(9,u=t));let r,c,a,y,p,b,{toolbarOptions:_=[[{header:1},{header:2},"blockquote","link","image","video"],["bold","italic","underline","strike"],[{list:"ordered"},{list:"ordered"}],[{align:[]}],["clean"]]}=n;N(async()=>{u&&(b=u.username),console.log(b);const{default:t}=await B(()=>import("../../../../../chunks/quill-f1865d11.js").then(d=>d.q),["../../../../../chunks/quill-f1865d11.js","../../../../../chunks/_commonjsHelpers-725317a4.js"],import.meta.url),{default:w}=await B(()=>import("../../../../../chunks/quill-cursors-6bd8dd54.js").then(d=>d.q),["../../../../../chunks/quill-cursors-6bd8dd54.js","../../../../../chunks/_commonjsHelpers-725317a4.js"],import.meta.url);t.register("modules/cursors",w),a=new A,i(1,c=new S("ws://gttx-ws.fly.dev","gttx",a)),y=a.getText("quill"),i(0,r=new t(r,{cursors:!0,modules:{toolbar:_,cursors:{transformOnTextChange:!0}},history:{userOnly:!0},theme:"snow",placeholder:"Write your story..."})),new J(y,r,c.awareness),p=r.getModule("cursors"),p.createCursor("cursor",u.username,"red"),c.on("synced",d=>{console.log("synced!",d)})});function f(t){W[t?"unshift":"push"](()=>{r=t,i(0,r)})}return l.$$set=t=>{"toolbarOptions"in t&&i(2,_=t.toolbarOptions)},[r,c,_,f]}class Y extends R{constructor(n){super(),U(this,n,z,j,V,{toolbarOptions:2})}}export{Y as default};
