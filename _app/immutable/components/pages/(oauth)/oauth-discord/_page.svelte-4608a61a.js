import{S as v,i as y,s as F,k as p,q as u,a as d,l as m,m as P,r as h,c as b,h as f,b as A,E as l,u as g,B as _,I,o as S}from"../../../../chunks/index-effa2c47.js";import{p as w}from"../../../../chunks/pocketbase-6b8fcb7c.js";import{s as V}from"../../../../chunks/singletons-8688bc0f.js";import"../../../../chunks/navigation-b2d51cf1.js";const k=()=>{const s=V;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},q={subscribe(s){return k().page.subscribe(s)}};function B(s){let t,r,n,o,i,c;return{c(){t=p("p"),r=u(s[0]),n=d(),o=u(s[1]),i=d(),c=p("br")},l(a){t=m(a,"P",{});var e=P(t);r=h(e,s[0]),n=b(e),o=h(e,s[1]),i=b(e),c=m(e,"BR",{}),e.forEach(f)},m(a,e){A(a,t,e),l(t,r),l(t,n),l(t,o),l(t,i),l(t,c)},p(a,[e]){e&1&&g(r,a[0]),e&2&&g(o,a[1])},i:_,o:_,d(a){a&&f(t)}}}function C(s,t,r){let n;I(s,q,e=>r(4,n=e));let o,i,c,a;return S(async()=>{let e="https://discord.com/api/oauth2/authorize?client_id=1066450258999132191&redirect_uri=https%3A%2F%2Fwww.gttx.app%2Foauth-discord&response_type=code&scope=identify%20email";codeRaw=await n.url.searchParams,o=o.get("code"),console.log("CODE	",o),i=await w.collection("users").listAuthMethods(),r(0,c=i==null?void 0:i.authProviders.filter(R=>R.name==="discord")[0]),console.log("VERIFIER	",c.codeVerifier);const E=await w.collection("users").authWithOAuth2("discord",o||"",c.codeVerifier,e,{name:"notkevin"});r(1,a=E)}),[c,a]}class z extends v{constructor(t){super(),y(this,t,C,B,F,{})}}export{z as default};
