import{S as le,i as ne,s as ue,e as se,b as h,B as j,h as o,I as pe,o as fe,k as m,q as N,a as $,l as _,m as y,r as T,c as H,p as de,n as w,E as i,Y as A,J as C,Z as L,_ as ce,u as me,K as _e,X as we,w as he,x as be,y as ve,f as Pe,t as ye,z as Ee}from"../../../../../chunks/index-9cd25cf6.js";import{u as ie}from"../../../../../chunks/useForm-fa7d1a1f.js";/* empty css                                            */import{v as V,r as W}from"../../../../../chunks/validators-08ded706.js";import{c as re,p as X}from"../../../../../chunks/pocketbase-389f893c.js";import{g as Z}from"../../../../../chunks/navigation-05f958b5.js";function oe(l){let s,e,r,n=l[3].username+"",p,f,b,E,S,t,u,k,d,g,v,z,P,R,Y,q,B,O,F,M,I,G,J,Q;return{c(){s=m("hgroup"),e=m("h1"),r=N("Password Change for "),p=N(n),f=$(),b=m("h2"),E=N("Be careful! Password changes are permanent!"),S=$(),t=m("form"),u=m("label"),k=N(`Old Password
			`),d=m("input"),g=N(`

			New Password
			`),v=m("input"),z=N(`

			New Password (...Again)
			`),P=m("input"),R=$(),Y=m("br"),q=$(),B=m("div"),O=m("button"),F=N("Back to Settings"),M=$(),I=m("button"),G=N("Submit"),this.h()},l(a){s=_(a,"HGROUP",{});var c=y(s);e=_(c,"H1",{style:!0});var K=y(e);r=T(K,"Password Change for "),p=T(K,n),K.forEach(o),f=H(c),b=_(c,"H2",{});var x=y(b);E=T(x,"Be careful! Password changes are permanent!"),x.forEach(o),c.forEach(o),S=H(a),t=_(a,"FORM",{method:!0});var ee=y(t);u=_(ee,"LABEL",{});var U=y(u);k=T(U,`Old Password
			`),d=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),g=T(U,`

			New Password
			`),v=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),z=T(U,`

			New Password (...Again)
			`),P=_(U,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),U.forEach(o),ee.forEach(o),R=H(a),Y=_(a,"BR",{}),q=H(a),B=_(a,"DIV",{class:!0});var D=y(B);O=_(D,"BUTTON",{class:!0});var te=y(O);F=T(te,"Back to Settings"),te.forEach(o),M=H(D),I=_(D,"BUTTON",{});var ae=y(I);G=T(ae,"Submit"),ae.forEach(o),D.forEach(o),this.h()},h(){de(e,"font-size","40px"),w(d,"type","password"),w(d,"name","oldpassword"),w(d,"id","password"),w(d,"placeholder","hunter2"),w(v,"type","password"),w(v,"name","oldpassword"),w(v,"id","password"),w(v,"placeholder","SuperSecure69"),w(P,"type","password"),w(P,"name","new_password_again"),w(P,"id","password"),w(P,"placeholder","SuperSecure69"),w(t,"method","POST"),w(O,"class","secondary"),w(B,"class","grid")},m(a,c){h(a,s,c),i(s,e),i(e,r),i(e,p),i(s,f),i(s,b),i(b,E),h(a,S,c),h(a,t,c),i(t,u),i(u,k),i(u,d),A(d,l[0]),i(u,g),i(u,v),A(v,l[1]),i(u,z),i(u,P),A(P,l[2]),h(a,R,c),h(a,Y,c),h(a,q,c),h(a,B,c),i(B,O),i(O,F),i(B,M),i(B,I),i(I,G),J||(Q=[C(d,"input",l[8]),L(V.call(null,d,[W])),C(v,"input",l[9]),L(V.call(null,v,[W])),C(P,"input",l[10]),L(V.call(null,P,[W])),L(l[4].call(null,t)),C(t,"submit",ce(l[7])),C(O,"click",l[6]),C(I,"click",l[5])],J=!0)},p(a,c){c&8&&n!==(n=a[3].username+"")&&me(p,n),c&1&&d.value!==a[0]&&A(d,a[0]),c&2&&v.value!==a[1]&&A(v,a[1]),c&4&&P.value!==a[2]&&A(P,a[2])},d(a){a&&o(s),a&&o(S),a&&o(t),a&&o(R),a&&o(Y),a&&o(q),a&&o(B),J=!1,_e(Q)}}}function Se(l){let s,e=l[3]&&oe(l);return{c(){e&&e.c(),s=se()},l(r){e&&e.l(r),s=se()},m(r,n){e&&e.m(r,n),h(r,s,n)},p(r,[n]){r[3]?e?e.p(r,n):(e=oe(r),e.c(),e.m(s.parentNode,s)):e&&(e.d(1),e=null)},i:j,o:j,d(r){e&&e.d(r),r&&o(s)}}}function ge(l,s,e){let r;pe(l,re,g=>e(3,r=g));var n="",p="",f="";const b=ie();async function E(){console.log(re);try{if(await X.collection("users").authWithPassword(r.username,n),p==f&&p!=""){console.log("Passwords matched, clearing auth and updating password!");try{await X.collection("users").update(r.id,{oldPassword:n,password:p,passwordConfirm:f}),X.authStore.clear(),Z("/login")}catch(g){console.log(g),alert("Something went wrong, please try again.")}}else alert("Your passwords do not match!")}catch(g){console.log(g),alert("Your old password was not correct!")}}async function S(){Z("/account")}fe(()=>{r||Z("/login")});function t(g){we.call(this,l,g)}function u(){n=this.value,e(0,n)}function k(){p=this.value,e(1,p)}function d(){f=this.value,e(2,f)}return[n,p,f,r,b,E,S,t,u,k,d]}class Be extends le{constructor(s){super(),ne(this,s,ge,Se,ue,{})}}function Ne(l){let s,e,r,n,p,f,b,E,S;return f=new Be({}),{c(){s=m("head"),e=m("title"),r=N("Hello, world!"),n=$(),p=m("body"),he(f.$$.fragment),b=$(),E=m("pre")},l(t){s=_(t,"HEAD",{});var u=y(s);e=_(u,"TITLE",{});var k=y(e);r=T(k,"Hello, world!"),k.forEach(o),u.forEach(o),n=H(t),p=_(t,"BODY",{});var d=y(p);be(f.$$.fragment,d),d.forEach(o),b=H(t),E=_(t,"PRE",{}),y(E).forEach(o)},m(t,u){h(t,s,u),i(s,e),i(e,r),h(t,n,u),h(t,p,u),ve(f,p,null),h(t,b,u),h(t,E,u),S=!0},p:j,i(t){S||(Pe(f.$$.fragment,t),S=!0)},o(t){ye(f.$$.fragment,t),S=!1},d(t){t&&o(s),t&&o(n),t&&o(p),Ee(f),t&&o(b),t&&o(E)}}}function Te(l){return ie(),[]}class Ae extends le{constructor(s){super(),ne(this,s,Te,Ne,ue,{})}}export{Ae as default};
