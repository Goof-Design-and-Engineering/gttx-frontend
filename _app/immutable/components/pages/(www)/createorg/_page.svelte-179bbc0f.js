import{S as ce,i as fe,s as de,a as O,k as p,q as z,w as R,c as T,l as _,m as $,r as C,h as l,x as X,n as v,b as S,E as i,Y as se,y as Z,J as D,Z as ie,_ as pe,f as Q,t as W,z as x,K as _e,I as le,o as ge,u as he,X as $e,B as be}from"../../../../chunks/index-9cd25cf6.js";import{u as me}from"../../../../chunks/useForm-fa7d1a1f.js";import{c as ve,p as J}from"../../../../chunks/pocketbase-389f893c.js";import{H as Ee,a as ye}from"../../../../chunks/HintGroup-b5a73d00.js";import{v as we,r as Ne}from"../../../../chunks/validators-08ded706.js";/* empty css                                         */import{g as H}from"../../../../chunks/navigation-05f958b5.js";function ue(o){let e,t;return{c(){e=p("p"),t=z(o[1])},l(a){e=_(a,"P",{});var n=$(e);t=C(n,o[1]),n.forEach(l)},m(a,n){S(a,e,n),i(e,t)},p(a,n){n&2&&he(t,a[1])},d(a){a&&l(e)}}}function Oe(o){let e;return{c(){e=z("This is a mandatory field")},l(t){e=C(t,"This is a mandatory field")},m(t,a){S(t,e,a)},d(t){t&&l(e)}}}function Te(o){let e,t;return e=new ye({props:{on:"required",$$slots:{default:[Oe]},$$scope:{ctx:o}}}),{c(){R(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,n){Z(e,a,n),t=!0},p(a,n){const s={};n&2048&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){t||(Q(e.$$.fragment,a),t=!0)},o(a){W(e.$$.fragment,a),t=!1},d(a){x(e,a)}}}function ze(o){let e,t,a,n,s,g,m,y,B,I,d,L,u,w,h,b,j,M,A,N,F,G,U,Y,q,K,ee,c=o[1]&&ue(o);return u=new Ee({props:{for:"organization",$$slots:{default:[Te]},$$scope:{ctx:o}}}),{c(){c&&c.c(),e=O(),t=p("h1"),a=z("Create an org"),n=O(),s=p("form"),g=p("div"),m=p("div"),y=p("label"),B=z("Organization Name"),I=O(),d=p("input"),L=O(),R(u.$$.fragment),w=O(),h=p("div"),b=p("button"),j=z("Sign up"),A=O(),N=p("button"),F=z("Nevermind, sign out"),G=O(),U=p("button"),Y=z("Join an org instead"),this.h()},l(r){c&&c.l(r),e=T(r),t=_(r,"H1",{class:!0});var f=$(t);a=C(f,"Create an org"),f.forEach(l),n=T(r),s=_(r,"FORM",{method:!0});var E=$(s);g=_(E,"DIV",{class:!0});var te=$(g);m=_(te,"DIV",{});var k=$(m);y=_(k,"LABEL",{for:!0});var ae=$(y);B=C(ae,"Organization Name"),ae.forEach(l),I=T(k),d=_(k,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),L=T(k),X(u.$$.fragment,k),k.forEach(l),te.forEach(l),w=T(E),h=_(E,"DIV",{class:!0});var P=$(h);b=_(P,"BUTTON",{});var ne=$(b);j=C(ne,"Sign up"),ne.forEach(l),A=T(P),N=_(P,"BUTTON",{class:!0});var re=$(N);F=C(re,"Nevermind, sign out"),re.forEach(l),P.forEach(l),G=T(E),U=_(E,"BUTTON",{});var oe=$(U);Y=C(oe,"Join an org instead"),oe.forEach(l),E.forEach(l),this.h()},h(){v(t,"class","page-name-header"),v(y,"for","organization"),v(d,"type","username"),v(d,"name","organization"),v(d,"id","username"),v(d,"placeholder","Goof, LLC"),v(g,"class","grid"),b.disabled=M=!o[2].valid,v(N,"class","secondary"),v(h,"class","grid"),v(s,"method","POST")},m(r,f){c&&c.m(r,f),S(r,e,f),S(r,t,f),i(t,a),S(r,n,f),S(r,s,f),i(s,g),i(g,m),i(m,y),i(y,B),i(m,I),i(m,d),se(d,o[0]),i(m,L),Z(u,m,null),i(s,w),i(s,h),i(h,b),i(b,j),i(h,A),i(h,N),i(N,F),i(s,G),i(s,U),i(U,Y),q=!0,K||(ee=[D(d,"input",o[8]),ie(we.call(null,d,[Ne])),D(b,"click",o[4]),D(N,"click",o[6]),D(U,"click",o[5]),ie(o[3].call(null,s)),D(s,"submit",pe(o[7]))],K=!0)},p(r,[f]){r[1]?c?c.p(r,f):(c=ue(r),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),f&1&&se(d,r[0]);const E={};f&2048&&(E.$$scope={dirty:f,ctx:r}),u.$set(E),(!q||f&4&&M!==(M=!r[2].valid))&&(b.disabled=M)},i(r){q||(Q(u.$$.fragment,r),q=!0)},o(r){W(u.$$.fragment,r),q=!1},d(r){c&&c.d(r),r&&l(e),r&&l(t),r&&l(n),r&&l(s),x(u),K=!1,_e(ee)}}}function V(o){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=o.substr(0,3).toUpperCase();let n=a;for(let s=0;s<8-a.length;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function Ce(o,e,t){let a,n;le(o,ve,u=>t(9,a=u));const s=me();le(o,s,u=>t(2,n=u));let g,m;async function y(){var u;try{console.log(V("test"));const w={name:g,members:[a.id],particapant_code:V("participant"),facilitator_code:V("facilitator"),observer_code:V("observer")},h=await J.collection("organization").create(w);if(h!=null){const b={org:h.id};J.collection("users").update((u=J.authStore.model)==null?void 0:u.id,b)}await H("/account")}catch(w){console.log(w),t(1,m=w),await H("/createorg")}}async function B(){H("joinorg")}async function I(){await J.authStore.clear(),H("/")}ge(async()=>{a.org!=""&&H("/account")});function d(u){$e.call(this,o,u)}function L(){g=this.value,t(0,g)}return[g,m,n,s,y,B,I,d,L]}class Se extends ce{constructor(e){super(),fe(this,e,Ce,ze,de,{})}}function Ue(o){let e,t,a;return t=new Se({}),{c(){e=p("body"),R(t.$$.fragment)},l(n){e=_(n,"BODY",{});var s=$(e);X(t.$$.fragment,s),s.forEach(l)},m(n,s){S(n,e,s),Z(t,e,null),a=!0},p:be,i(n){a||(Q(t.$$.fragment,n),a=!0)},o(n){W(t.$$.fragment,n),a=!1},d(n){n&&l(e),x(t)}}}function ke(o){return me(),[]}class Pe extends ce{constructor(e){super(),fe(this,e,ke,Ue,de,{})}}export{Pe as default};
